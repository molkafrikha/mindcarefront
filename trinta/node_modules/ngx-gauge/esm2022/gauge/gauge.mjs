import { Component, Input, ViewEncapsulation, ViewChild, ContentChild } from '@angular/core';
import { clamp, coerceBooleanProperty, coerceNumberProperty, cssUnit, isNumber } from '../common/util';
import { NgxGaugeLabel, NgxGaugeValue, NgxGaugePrepend, NgxGaugeAppend } from './gauge-directives';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
const DEFAULTS = {
    MIN: 0,
    MAX: 100,
    TYPE: 'arch',
    THICK: 4,
    FOREGROUND_COLOR: 'rgba(0, 150, 136, 1)',
    BACKGROUND_COLOR: 'rgba(0, 0, 0, 0.1)',
    CAP: 'butt',
    SIZE: 200
};
export class NgxGauge {
    get size() { return this._size; }
    set size(value) {
        this._size = coerceNumberProperty(value);
    }
    get margin() { return this._margin; }
    set margin(value) {
        this._margin = coerceNumberProperty(value);
    }
    get min() { return this._min; }
    set min(value) {
        this._min = coerceNumberProperty(value, DEFAULTS.MIN);
    }
    get animate() { return this._animate; }
    set animate(value) {
        this._animate = coerceBooleanProperty(value);
    }
    get max() { return this._max; }
    set max(value) {
        this._max = coerceNumberProperty(value, DEFAULTS.MAX);
    }
    get value() { return this._value; }
    set value(val) {
        this._value = coerceNumberProperty(val);
    }
    constructor(_elementRef, _renderer) {
        this._elementRef = _elementRef;
        this._renderer = _renderer;
        this._size = DEFAULTS.SIZE;
        this._min = DEFAULTS.MIN;
        this._max = DEFAULTS.MAX;
        this._animate = true;
        this._margin = 0;
        this._initialized = false;
        this._animationRequestID = 0;
        this.ariaLabel = '';
        this.ariaLabelledby = null;
        this.type = DEFAULTS.TYPE;
        this.cap = DEFAULTS.CAP;
        this.thick = DEFAULTS.THICK;
        this.foregroundColor = DEFAULTS.FOREGROUND_COLOR;
        this.backgroundColor = DEFAULTS.BACKGROUND_COLOR;
        // { "40" : { color: "green", bgOpacity: .2 }, ... }
        this.thresholds = Object.create(null);
        // { "25": { color: '#ccc', type: 'line', size: 8, label: "25 lbs" }, ... }
        this.markers = Object.create(null);
        this._value = 0;
        this.duration = 1200;
    }
    ngOnInit() {
        // if markers are to be added, but no margin specified then here we add 10 px.
        if (this.markers && Object.keys(this.markers).length > 0 && !this._margin)
            this._margin = 10;
    }
    ngOnChanges(changes) {
        const isCanvasPropertyChanged = changes['thick'] || changes['type'] || changes['cap'] || changes['size'];
        const isDataChanged = changes['value'] || changes['min'] || changes['max'];
        if (this._initialized) {
            if (isDataChanged) {
                let nv;
                if (changes['value']) {
                    nv = Number(changes['value'].currentValue);
                    nv = isNaN(nv) ? 0 : nv;
                    const prevVal = Number(changes['value'].previousValue);
                    this._oldChangeVal = isNaN(prevVal) ? this._oldChangeVal : prevVal;
                }
                this._update(nv, this._oldChangeVal);
            }
            if (isCanvasPropertyChanged) {
                this._destroy();
                this._init();
            }
        }
    }
    _updateSize() {
        this._renderer.setStyle(this._elementRef.nativeElement, 'width', cssUnit(this._getWidth()));
        this._renderer.setStyle(this._elementRef.nativeElement, 'height', cssUnit(this._getCanvasHeight()));
        this._canvas.nativeElement.width = this._getWidth();
        this._canvas.nativeElement.height = this._getCanvasHeight();
        this._renderer.setStyle(this._label.nativeElement, 'transform', 'translateY(' + (this.size / 3 * 2 - this.size / 13 / 4) + 'px)');
        this._renderer.setStyle(this._reading.nativeElement, 'transform', 'translateY(' + (this.size / 2 - this.size * 0.22 / 2) + 'px)');
    }
    ngAfterViewInit() {
        if (this._canvas) {
            this._init();
        }
    }
    ngOnDestroy() {
        this._destroy();
    }
    _getBounds(type) {
        let head, tail, start, end;
        if (type == 'semi') {
            head = Math.PI;
            tail = 2 * Math.PI;
            start = 180;
            end = 360;
        }
        else if (type == 'full') {
            head = 1.5 * Math.PI;
            tail = 3.5 * Math.PI;
            start = 270;
            end = start + 360;
        }
        else if (type === 'arch') {
            head = 0.8 * Math.PI;
            tail = 2.2 * Math.PI;
            start = 180 - (0.2 * 180);
            end = 360 + (0.2 * 180);
        }
        return { head, tail, start, end };
    }
    _drawShell(start, middle, tail, color) {
        let center = this._getCenter(), radius = this._getRadius();
        if (this._initialized) {
            this._clear();
            this._drawMarkersAndTicks();
            let ranges = this._getBackgroundColorRanges();
            this._context.lineWidth = this.thick;
            if (ranges && ranges.length > 0) {
                // if background color is not specified then use default background, unless opacity is provided in which case use the color
                // and opactity against color, to form the background color.
                this._context.lineCap = 'butt';
                for (let i = 0; i < ranges.length; ++i) {
                    let r = ranges[i];
                    this._context.beginPath();
                    this._context.strokeStyle = r.backgroundColor ? r.backgroundColor : (r.bgOpacity) ? r.color : this.backgroundColor;
                    if (r.bgOpacity !== undefined && r.bgOpacity !== null) {
                        this._context.globalAlpha = r.bgOpacity;
                    }
                    this._context.arc(center.x, center.y, radius, this._getDisplacement(r.start), this._getDisplacement(r.end), false);
                    this._context.stroke();
                    this._context.globalAlpha = 1;
                }
            }
            else {
                this._context.lineCap = this.cap;
                this._context.beginPath();
                this._context.strokeStyle = this.backgroundColor;
                this._context.arc(center.x, center.y, radius, start, tail, false);
                this._context.stroke();
            }
            this._drawFill(start, middle, tail, color);
        }
    }
    _drawFill(start, middle, tail, color) {
        let center = this._getCenter(), radius = this._getRadius();
        this._context.lineCap = this.cap;
        this._context.lineWidth = this.thick;
        middle = Math.max(middle, start); // never below 0%
        middle = Math.min(middle, tail); // never exceed 100%
        this._context.lineCap = this.cap;
        this._context.lineWidth = this.thick;
        this._context.beginPath();
        this._context.strokeStyle = color;
        this._context.arc(center.x, center.y, radius, start, middle, false);
        this._context.stroke();
    }
    _addMarker(angle, color, label, type, len, font) {
        var rad = angle * Math.PI / 180;
        let offset = 2;
        if (!len)
            len = 8;
        if (!type)
            type = 'line';
        let center = this._getCenter(), radius = this._getRadius();
        let x = (radius + this.thick / 2 + offset) * Math.cos(rad) + center.x;
        let y = (radius + this.thick / 2 + offset) * Math.sin(rad) + center.y;
        let x2 = (radius + this.thick / 2 + offset + len) * Math.cos(rad) + center.x;
        let y2 = (radius + this.thick / 2 + offset + len) * Math.sin(rad) + center.y;
        if (type == 'triangle') {
            //Draw the triangle marker
            this._context.beginPath();
            this._context.strokeStyle = color;
            this._context.moveTo(x, y);
            this._context.lineWidth = 1;
            let a2 = angle - 45;
            let a3 = angle + 45;
            if (a2 < 0)
                a2 += 360;
            if (a2 > 360)
                a2 -= 360;
            if (a3 < 0)
                a3 += 360;
            if (a3 > 360)
                a3 -= 360;
            let rad2 = a2 * Math.PI / 180;
            let x3 = len * Math.cos(rad2) + x;
            let y3 = len * Math.sin(rad2) + y;
            this._context.lineTo(x3, y3);
            let rad3 = a3 * Math.PI / 180;
            let x4 = len * Math.cos(rad3) + x;
            let y4 = len * Math.sin(rad3) + y;
            this._context.lineTo(x4, y4);
            this._context.lineTo(x, y);
            this._context.closePath();
            this._context.stroke();
            this._context.fillStyle = color;
            this._context.fill();
        }
        else { //line
            this._context.beginPath();
            this._context.lineWidth = .5;
            this._context.strokeStyle = color;
            this._context.moveTo(x, y);
            this._context.lineTo(x2, y2);
            this._context.closePath();
            this._context.stroke();
        }
        if (label) {
            this._context.save();
            this._context.translate(x2, y2);
            this._context.rotate((angle + 90) * (Math.PI / 180));
            this._context.textAlign = "center";
            this._context.font = (font) ? font : '13px Arial';
            this._context.fillText(label, 0, -3);
            this._context.restore();
        }
    }
    _clear() {
        this._context.clearRect(0, 0, this._getWidth(), this._getHeight());
    }
    _getWidth() {
        return this.size;
    }
    _getHeight() {
        return this.size;
    }
    // canvas height will be shorter for type 'semi' and 'arch'
    _getCanvasHeight() {
        return (this.type == 'arch' || this.type == 'semi')
            ? 0.85 * this._getHeight()
            : this._getHeight();
    }
    _getRadius() {
        const center = this._getCenter();
        var rad = center.x - this.thick;
        if (this._margin > 0)
            rad -= this._margin;
        return rad;
    }
    _getCenter() {
        var x = this._getWidth() / 2, y = this._getHeight() / 2;
        return { x, y };
    }
    _init() {
        this._context = this._canvas.nativeElement.getContext('2d');
        this._initialized = true;
        this._updateSize();
        this._create();
    }
    _destroy() {
        if (this._animationRequestID) {
            window.cancelAnimationFrame(this._animationRequestID);
            this._animationRequestID = 0;
        }
        this._clear();
        this._context = null;
        this._initialized = false;
    }
    _getForegroundColorByRange(value) {
        const thresh = this._getThresholdMatchForValue(value);
        return thresh && thresh.color ? thresh.color : this.foregroundColor;
    }
    _getThresholdMatchForValue(value) {
        const match = Object.keys(this.thresholds)
            .filter(function (item) { return isNumber(item) && Number(item) <= value; })
            .sort((a, b) => Number(a) - Number(b))
            .reverse()[0];
        if (match !== undefined) {
            const thresh = this.thresholds[match];
            const t = {
                color: thresh.color,
                backgroundColor: thresh.backgroundColor,
                bgOpacity: thresh.bgOpacity,
                start: Number(match),
                end: this._getNextThreshold(Number(match))
            };
            return t;
        }
    }
    _getNextThreshold(value) {
        const match = Object.keys(this.thresholds)
            .filter(function (item) { return isNumber(item) && Number(item) > value; })
            .sort((a, b) => Number(a) - Number(b));
        if (match && match[0] !== undefined) {
            return Number(match[0]);
        }
        else {
            return this.max;
        }
    }
    _getBackgroundColorRanges() {
        let i = 0, ranges = [];
        do {
            let thresh = this._getThresholdMatchForValue(i);
            if (thresh) {
                ranges.push({
                    start: thresh.start,
                    end: thresh.end,
                    color: thresh.color,
                    backgroundColor: thresh.backgroundColor,
                    bgOpacity: thresh.bgOpacity
                });
                i = thresh.end;
                if (i >= this.max)
                    break;
            }
            else
                break;
        } while (true);
        return ranges;
    }
    _getDisplacement(v) {
        let type = this.type, bounds = this._getBounds(type), min = this.min, max = this.max, start = bounds.head, value = clamp(v, this.min, this.max), unit = (bounds.tail - bounds.head) / (max - min), displacement = unit * (value - min);
        return start + displacement;
    }
    _create(nv, ov) {
        const self = this;
        const type = this.type;
        const bounds = this._getBounds(type);
        const duration = this.duration;
        const min = this.min;
        const max = this.max;
        const value = clamp(this.value, min, max);
        const start = bounds.head;
        const unit = (bounds.tail - bounds.head) / (max - min);
        let displacement = unit * (value - min);
        const tail = bounds.tail;
        const color = this._getForegroundColorByRange(value);
        let startTime;
        if (self._animationRequestID) {
            window.cancelAnimationFrame(self._animationRequestID);
        }
        const animate = (timestamp) => {
            timestamp = timestamp || new Date().getTime();
            const runtime = timestamp - startTime;
            const progress = Math.min(runtime / duration, 1);
            const previousProgress = ov ? (ov - min) * unit : 0;
            const middle = start + previousProgress + displacement * progress;
            self._drawShell(start, middle, tail, color);
            if (self._animationRequestID && (runtime < duration)) {
                self._animationRequestID = window.requestAnimationFrame((ts) => animate(ts));
            }
            else {
                window.cancelAnimationFrame(self._animationRequestID);
            }
        };
        if (this._animate) {
            if (nv !== undefined && ov !== undefined && ov !== 0) {
                displacement = unit * nv - unit * ov;
            }
            self._animationRequestID = window.requestAnimationFrame((timestamp) => {
                startTime = timestamp || new Date().getTime();
                animate(startTime);
            });
        }
        else {
            self._drawShell(start, start + displacement, tail, color);
        }
    }
    _drawMarkersAndTicks() {
        /*
         * example:
        this.markers = {
            '-10': {
                color: '#555',
                size: 5,
                label: '-10',
                font: '11px verdana',
                type: 'line',
            },
            '10': {
                color: '#555',
                size: 5,
                label: '10',
                font: '11px verdana',
                type: 'line',
            },
            '20': {
                color: '#555',
                size: 5,
                label: '20',
                type: 'line',
            },
        };
        */
        if (this.markers) {
            const bounds = this._getBounds(this.type);
            const degrees = (bounds.end - bounds.start);
            const perD = degrees / (this.max - this.min);
            for (const mv in this.markers) {
                const n = Number(mv) - this.min;
                const angle = bounds.start + n * perD;
                const m = this.markers[mv];
                this._addMarker(angle, m.color, m.label, m.type, m.size, m.font);
            }
        }
    }
    _update(nv, ov) {
        this._clear();
        this._create(nv, ov);
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.0.6", ngImport: i0, type: NgxGauge, deps: [{ token: i0.ElementRef }, { token: i0.Renderer2 }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "17.0.6", type: NgxGauge, selector: "ngx-gauge", inputs: { ariaLabel: ["aria-label", "ariaLabel"], ariaLabelledby: ["aria-labelledby", "ariaLabelledby"], size: "size", margin: "margin", min: "min", animate: "animate", max: "max", type: "type", cap: "cap", thick: "thick", label: "label", append: "append", prepend: "prepend", foregroundColor: "foregroundColor", backgroundColor: "backgroundColor", thresholds: "thresholds", markers: "markers", value: "value", duration: "duration" }, host: { attributes: { "role": "slider", "aria-readonly": "true" }, properties: { "class.ngx-gauge-meter": "true", "attr.aria-valuemin": "min", "attr.aria-valuemax": "max", "attr.aria-valuenow": "value", "attr.aria-label": "ariaLabel", "attr.aria-labelledby": "ariaLabelledby" } }, queries: [{ propertyName: "_labelChild", first: true, predicate: NgxGaugeLabel, descendants: true }, { propertyName: "_prependChild", first: true, predicate: NgxGaugePrepend, descendants: true }, { propertyName: "_appendChild", first: true, predicate: NgxGaugeAppend, descendants: true }, { propertyName: "_valueDisplayChild", first: true, predicate: NgxGaugeValue, descendants: true }], viewQueries: [{ propertyName: "_canvas", first: true, predicate: ["canvas"], descendants: true, static: true }, { propertyName: "_label", first: true, predicate: ["rLabel"], descendants: true, static: true }, { propertyName: "_reading", first: true, predicate: ["reading"], descendants: true, static: true }], usesOnChanges: true, ngImport: i0, template: "<div class=\"reading-block\" #reading [style.fontSize]=\"(size-(margin*2)) * 0.22 + 'px'\">\r\n  <!-- This block can not be indented correctly, because line breaks cause layout spacing, related problem: https://pt.stackoverflow.com/q/276760/2998 -->\r\n  <u class=\"reading-affix\" [ngSwitch]=\"_prependChild != null\"><ng-content select=\"ngx-gauge-prepend\" *ngSwitchCase=\"true\"></ng-content><ng-container *ngSwitchCase=\"false\">{{prepend}}</ng-container></u><ng-container [ngSwitch]=\"_valueDisplayChild != null\"><ng-content *ngSwitchCase=\"true\" select=\"ngx-gauge-value\"></ng-content><ng-container *ngSwitchCase=\"false\">{{value | number}}</ng-container></ng-container><u class=\"reading-affix\" [ngSwitch]=\"_appendChild != null\"><ng-content select=\"ngx-gauge-append\" *ngSwitchCase=\"true\"></ng-content><ng-container *ngSwitchCase=\"false\">{{append}}</ng-container></u>\r\n</div>\r\n<div class=\"reading-label\" #rLabel\r\n     [style.fontSize]=\"(size-(margin*2)) / 13 + 'px'\"\r\n     [ngSwitch]=\"_labelChild != null\">\r\n  <ng-content select=\"ngx-gauge-label\" *ngSwitchCase=\"true\"></ng-content>\r\n  <ng-container *ngSwitchCase=\"false\">{{label}}</ng-container>\r\n</div>\r\n<canvas #canvas></canvas>\r\n", styles: [".ngx-gauge-meter{display:inline-block;text-align:center;position:relative}.reading-block{position:absolute;width:100%;font-weight:400;white-space:nowrap;text-align:center;overflow:hidden;text-overflow:ellipsis}.reading-label{font-family:inherit;width:100%;display:inline-block;position:absolute;text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:400}.reading-affix{text-decoration:none;font-size:.6em;opacity:.8;font-weight:200;padding:0 .18em}.reading-affix:first-child{padding-left:0}.reading-affix:last-child{padding-right:0}\n"], dependencies: [{ kind: "directive", type: i1.NgSwitch, selector: "[ngSwitch]", inputs: ["ngSwitch"] }, { kind: "directive", type: i1.NgSwitchCase, selector: "[ngSwitchCase]", inputs: ["ngSwitchCase"] }, { kind: "pipe", type: i1.DecimalPipe, name: "number" }], encapsulation: i0.ViewEncapsulation.None }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.0.6", ngImport: i0, type: NgxGauge, decorators: [{
            type: Component,
            args: [{ selector: 'ngx-gauge', host: {
                        'role': 'slider',
                        'aria-readonly': 'true',
                        '[class.ngx-gauge-meter]': 'true',
                        '[attr.aria-valuemin]': 'min',
                        '[attr.aria-valuemax]': 'max',
                        '[attr.aria-valuenow]': 'value',
                        '[attr.aria-label]': 'ariaLabel',
                        '[attr.aria-labelledby]': 'ariaLabelledby'
                    }, encapsulation: ViewEncapsulation.None, template: "<div class=\"reading-block\" #reading [style.fontSize]=\"(size-(margin*2)) * 0.22 + 'px'\">\r\n  <!-- This block can not be indented correctly, because line breaks cause layout spacing, related problem: https://pt.stackoverflow.com/q/276760/2998 -->\r\n  <u class=\"reading-affix\" [ngSwitch]=\"_prependChild != null\"><ng-content select=\"ngx-gauge-prepend\" *ngSwitchCase=\"true\"></ng-content><ng-container *ngSwitchCase=\"false\">{{prepend}}</ng-container></u><ng-container [ngSwitch]=\"_valueDisplayChild != null\"><ng-content *ngSwitchCase=\"true\" select=\"ngx-gauge-value\"></ng-content><ng-container *ngSwitchCase=\"false\">{{value | number}}</ng-container></ng-container><u class=\"reading-affix\" [ngSwitch]=\"_appendChild != null\"><ng-content select=\"ngx-gauge-append\" *ngSwitchCase=\"true\"></ng-content><ng-container *ngSwitchCase=\"false\">{{append}}</ng-container></u>\r\n</div>\r\n<div class=\"reading-label\" #rLabel\r\n     [style.fontSize]=\"(size-(margin*2)) / 13 + 'px'\"\r\n     [ngSwitch]=\"_labelChild != null\">\r\n  <ng-content select=\"ngx-gauge-label\" *ngSwitchCase=\"true\"></ng-content>\r\n  <ng-container *ngSwitchCase=\"false\">{{label}}</ng-container>\r\n</div>\r\n<canvas #canvas></canvas>\r\n", styles: [".ngx-gauge-meter{display:inline-block;text-align:center;position:relative}.reading-block{position:absolute;width:100%;font-weight:400;white-space:nowrap;text-align:center;overflow:hidden;text-overflow:ellipsis}.reading-label{font-family:inherit;width:100%;display:inline-block;position:absolute;text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:400}.reading-affix{text-decoration:none;font-size:.6em;opacity:.8;font-weight:200;padding:0 .18em}.reading-affix:first-child{padding-left:0}.reading-affix:last-child{padding-right:0}\n"] }]
        }], ctorParameters: () => [{ type: i0.ElementRef }, { type: i0.Renderer2 }], propDecorators: { _canvas: [{
                type: ViewChild,
                args: ['canvas', { static: true }]
            }], _label: [{
                type: ViewChild,
                args: ['rLabel', { static: true }]
            }], _reading: [{
                type: ViewChild,
                args: ['reading', { static: true }]
            }], _labelChild: [{
                type: ContentChild,
                args: [NgxGaugeLabel]
            }], _prependChild: [{
                type: ContentChild,
                args: [NgxGaugePrepend]
            }], _appendChild: [{
                type: ContentChild,
                args: [NgxGaugeAppend]
            }], _valueDisplayChild: [{
                type: ContentChild,
                args: [NgxGaugeValue]
            }], ariaLabel: [{
                type: Input,
                args: ['aria-label']
            }], ariaLabelledby: [{
                type: Input,
                args: ['aria-labelledby']
            }], size: [{
                type: Input
            }], margin: [{
                type: Input
            }], min: [{
                type: Input
            }], animate: [{
                type: Input
            }], max: [{
                type: Input
            }], type: [{
                type: Input
            }], cap: [{
                type: Input
            }], thick: [{
                type: Input
            }], label: [{
                type: Input
            }], append: [{
                type: Input
            }], prepend: [{
                type: Input
            }], foregroundColor: [{
                type: Input
            }], backgroundColor: [{
                type: Input
            }], thresholds: [{
                type: Input
            }], markers: [{
                type: Input
            }], value: [{
                type: Input
            }], duration: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2F1Z2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9uZ3gtZ2F1Z2Uvc3JjL2dhdWdlL2dhdWdlLnRzIiwiLi4vLi4vLi4vLi4vcHJvamVjdHMvbmd4LWdhdWdlL3NyYy9nYXVnZS9nYXVnZS5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDSCxTQUFTLEVBQ1QsS0FBSyxFQUVMLGlCQUFpQixFQU1qQixTQUFTLEVBQ1QsWUFBWSxFQUVmLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFDSCxLQUFLLEVBQ0wscUJBQXFCLEVBQ3JCLG9CQUFvQixFQUNwQixPQUFPLEVBQ1AsUUFBUSxFQUNYLE1BQU0sZ0JBQWdCLENBQUM7QUFDeEIsT0FBTyxFQUFFLGFBQWEsRUFBRSxhQUFhLEVBQUUsZUFBZSxFQUFFLGNBQWMsRUFBRSxNQUFNLG9CQUFvQixDQUFDOzs7QUFFbkcsTUFBTSxRQUFRLEdBQUc7SUFDYixHQUFHLEVBQUUsQ0FBQztJQUNOLEdBQUcsRUFBRSxHQUFHO0lBQ1IsSUFBSSxFQUFFLE1BQU07SUFDWixLQUFLLEVBQUUsQ0FBQztJQUNSLGdCQUFnQixFQUFFLHNCQUFzQjtJQUN4QyxnQkFBZ0IsRUFBRSxvQkFBb0I7SUFDdEMsR0FBRyxFQUFFLE1BQU07SUFDWCxJQUFJLEVBQUUsR0FBRztDQUNaLENBQUM7QUFzQkYsTUFBTSxPQUFPLFFBQVE7SUF5QmpCLElBQ0ksSUFBSSxLQUFhLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFDekMsSUFBSSxJQUFJLENBQUMsS0FBYTtRQUNsQixJQUFJLENBQUMsS0FBSyxHQUFHLG9CQUFvQixDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzdDLENBQUM7SUFFRCxJQUNJLE1BQU0sS0FBYSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0lBQzdDLElBQUksTUFBTSxDQUFDLEtBQWE7UUFDcEIsSUFBSSxDQUFD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QUFDO1FBQzFCLElBQUksQ0FBQyxRQUFRLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQztRQUNsQyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDcEUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUUzQixDQUFDO0lBRU8sVUFBVSxDQUFDLEtBQUssRUFBQyxLQUFLLEVBQUMsS0FBTSxFQUFDLElBQUssRUFBQyxHQUFJLEVBQUMsSUFBSztRQUVsRCxJQUFJLEdBQUcsR0FBRyxLQUFLLEdBQUcsSUFBSSxDQUFDLEVBQUUsR0FBRyxHQUFHLENBQUM7UUFFaEMsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDO1FBRWYsSUFBSSxDQUFDLEdBQUc7WUFBRSxHQUFHLEdBQUcsQ0FBQyxDQUFDO1FBRWxCLElBQUksQ0FBQyxJQUFJO1lBQUUsSUFBSSxHQUFHLE1BQU0sQ0FBQztRQUV6QixJQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsVUFBVSxFQUFFLEVBQzFCLE1BQU0sR0FBRyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7UUFFL0IsSUFBSSxDQUFDLEdBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLEtBQUssR0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQ3JFLElBQUksQ0FBQyxHQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLEdBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUNyRSxJQUFJLEVBQUUsR0FBRyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxHQUFDLENBQUMsR0FBRyxNQUFN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clxuICAgIFNpbXBsZUNoYW5nZXMsXHJcbiAgICBWaWV3RW5jYXBzdWxhdGlvbixcclxuICAgIFJlbmRlcmVyMixcclxuICAgIEFmdGVyVmlld0luaXQsXHJcbiAgICBFbGVtZW50UmVmLFxyXG4gICAgT25DaGFuZ2VzLFxyXG4gICAgT25EZXN0cm95LFxyXG4gICAgVmlld0NoaWxkLFxyXG4gICAgQ29udGVudENoaWxkLFxyXG4gICAgT25Jbml0XHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7XHJcbiAgICBjbGFtcCxcclxuICAgIGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eSxcclxuICAgIGNvZXJjZU51bWJlclByb3BlcnR5LFxyXG4gICAgY3NzVW5pdCxcclxuICAgIGlzTnVtYmVyXHJcbn0gZnJvbSAnLi4vY29tbW9uL3V0aWwnO1xyXG5pbXBvcnQgeyBOZ3hHYXVnZUxhYmVsLCBOZ3hHYXVnZVZhbHVlLCBOZ3hHYXVnZVByZXBlbmQsIE5neEdhdWdlQXBwZW5kIH0gZnJvbSAnLi9nYXVnZS1kaXJlY3RpdmVzJztcclxuXHJcbmNvbnN0IERFRkFVTFRTID0ge1xyXG4gICAgTUlOOiAwLFxyXG4gICAgTUFYOiAxMDAsXHJcbiAgICBUWVBFOiAnYXJjaCcsXHJcbiAgICBUSElDSzogNCxcclxuICAgIEZPUkVHUk9VTkRfQ09MT1I6ICdyZ2JhKDAsIDE1MCwgMTM2LCAxKScsXHJcbiAgICBCQUNLR1JPVU5EX0NPTE9SOiAncmdiYSgwLCAwLCAwLCAwLjEpJyxcclxuICAgIENBUDogJ2J1dHQnLFxyXG4gICAgU0laRTogMjAwXHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBOZ3hHYXVnZVR5cGUgPSAnZnVsbCcgfCAnYXJjaCcgfCAnc2VtaSc7XHJcbmV4cG9ydCB0eXBlIE5neEdhdWdlQ2FwID0gJ3JvdW5kJyB8ICdidXR0JztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICduZ3gtZ2F1Z2UnLFxyXG4gICAgdGVtcGxhdGVVcmw6ICdnYXVnZS5odG1sJyxcclxuICAgIHN0eWxlVXJsczogWydnYXVnZS5jc3MnXSxcclxuICAgIGhvc3Q6IHtcclxuICAgICAgICAncm9sZSc6ICdzbGlkZXInLFxyXG4gICAgICAgICdhcmlhLXJlYWRvbmx5JzogJ3RydWUnLFxyXG4gICAgICAgICdbY2xhc3Mubmd4LWdhdWdlLW1ldGVyXSc6ICd0cnVlJyxcclxuICAgICAgICAnW2F0dHIuYXJpYS12YWx1ZW1pbl0nOiAnbWluJyxcclxuICAgICAgICAnW2F0dHIuYXJpYS12YWx1ZW1heF0nOiAnbWF4JyxcclxuICAgICAgICAnW2F0dHIuYXJpYS12YWx1ZW5vd10nOiAndmFsdWUnLFxyXG4gICAgICAgICdbYXR0ci5hcmlhLWxhYmVsXSc6ICdhcmlhTGFiZWwnLFxyXG4gICAgICAgICdbYXR0ci5hcmlhLWxhYmVsbGVkYnldJzogJ2FyaWFMYWJlbGxlZGJ5J1xyXG5cclxuICAgIH0sXHJcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBOZ3hHYXVnZSBpbXBsZW1lbnRzIEFmdGVyVmlld0luaXQsIE9uQ2hhbmdlcywgT25EZXN0cm95LCBPbkluaXQge1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ2NhbnZhcycsIHsgc3RhdGljOiB0cnVlIH0pIF9jYW52YXM6IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdyTGFiZWwnLCB7IHN0YXRpYzogdHJ1ZSB9KSBfbGFiZWw6IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdyZWFkaW5nJywgeyBzdGF0aWM6IHRydWUgfSkgX3JlYWRpbmc6IEVsZW1lbnRSZWY7XHJcblxyXG4gICAgQENvbnRlbnRDaGlsZChOZ3hHYXVnZUxhYmVsKSBfbGFiZWxDaGlsZDogTmd4R2F1Z2VMYWJlbDtcclxuICAgIEBDb250ZW50Q2hpbGQoTmd4R2F1Z2VQcmVwZW5kKSBfcHJlcGVuZENoaWxkOiBOZ3hHYXVnZVByZXBlbmQ7XHJcbiAgICBAQ29udGVudENoaWxkKE5neEdhdWdlQXBwZW5kKSBfYXBwZW5kQ2hpbGQ6IE5neEdhdWdlQXBwZW5kO1xyXG4gICAgQENvbnRlbnRDaGlsZChOZ3hHYXVnZVZhbHVlKSBfdmFsdWVEaXNwbGF5Q2hpbGQ6IE5neEdhdWdlVmFsdWU7XHJcblxyXG4gICAgcHJpdmF0ZSBfc2l6ZTogbnVtYmVyID0gREVGQVVMVFMuU0laRTtcclxuICAgIHByaXZhdGUgX21pbjogbnVtYmVyID0gREVGQVVMVFMuTUlOO1xyXG4gICAgcHJpdmF0ZSBfbWF4OiBudW1iZXIgPSBERUZBVUxUUy5NQVg7XHJcbiAgICBwcml2YXRlIF9hbmltYXRlOiBib29sZWFuID0gdHJ1ZTtcclxuICAgIHByaXZhdGUgX21hcmdpbjogbnVtYmVyID0gMDtcclxuXHJcbiAgICBwcml2YXRlIF9pbml0aWFsaXplZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBfY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG4gICAgcHJpdmF0ZSBfYW5pbWF0aW9uUmVxdWVzdElEOiBudW1iZXIgPSAwO1xyXG5cclxuICAgIEBJbnB1dCgnYXJpYS1sYWJlbCcpIGFyaWFMYWJlbDogc3RyaW5nID0gJyc7XHJcblxyXG4gICAgQElucHV0KCdhcmlhLWxhYmVsbGVkYnknKSBhcmlhTGFiZWxsZWRieTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgQElucHV0KClcclxuICAgIGdldCBzaXplKCk6IG51bWJlciB7IHJldHVybiB0aGlzLl9zaXplOyB9XHJcbiAgICBzZXQgc2l6ZSh2YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5fc2l6ZSA9IGNvZXJjZU51bWJlclByb3BlcnR5KHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBASW5wdXQoKVxyXG4gICAgZ2V0IG1hcmdpbigpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fbWFyZ2luOyB9XHJcbiAgICBzZXQgbWFyZ2luKHZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLl9tYXJnaW4gPSBjb2VyY2VOdW1iZXJQcm9wZXJ0eSh2YWx1ZSk7XHJcbiAgICB9ICAgIFxyXG5cclxuICAgIEBJbnB1dCgpXHJcbiAgICBnZXQgbWluKCk6IG51bWJlciB7IHJldHVybiB0aGlzLl9taW47IH1cclxuICAgIHNldCBtaW4odmFsdWU6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuX21pbiA9IGNvZXJjZU51bWJlclByb3BlcnR5KHZhbHVlLCBERUZBVUxUUy5NSU4pO1xyXG4gICAgfVxyXG4gICAgQElucHV0KClcclxuICAgIGdldCBhbmltYXRlKCk6IGJvb2xlYW4geyByZXR1cm4gdGhpcy5fYW5pbWF0ZTsgfVxyXG4gICAgc2V0IGFuaW1hdGUodmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9hbmltYXRlID0gY29lcmNlQm9vbGVhblByb3BlcnR5KHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBASW5wdXQoKVxyXG4gICAgZ2V0IG1heCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fbWF4OyB9XHJcbiAgICBzZXQgbWF4KHZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLl9tYXggPSBjb2VyY2VOdW1iZXJQcm9wZXJ0eSh2YWx1ZSwgREVGQVVMVFMuTUFYKTtcclxuICAgIH1cclxuXHJcbiAgICBASW5wdXQoKSB0eXBlOiBOZ3hHYXVnZVR5cGUgPSBERUZBVUxUUy5UWVBFIGFzIE5neEdhdWdlVHlwZTtcclxuXHJcbiAgICBASW5wdXQoKSBjYXA6IE5neEdhdWdlQ2FwID0gREVGQVVMVFMuQ0FQIGFzIE5neEdhdWdlQ2FwO1xyXG5cclxuICAgIEBJbnB1dCgpIHRoaWNrOiBudW1iZXIgPSBERUZBVUxUUy5USElDSztcclxuXHJcbiAgICBASW5wdXQoKSBsYWJlbDogc3RyaW5nO1xyXG5cclxuICAgIEBJbnB1dCgpIGFwcGVuZDogc3RyaW5nO1xyXG5cclxuICAgIEBJbnB1dCgpIHByZXBlbmQ6IHN0cmluZztcclxuXHJcbiAgICBASW5wdXQoKSBmb3JlZ3JvdW5kQ29sb3I6IHN0cmluZyA9IERFRkFVTFRTLkZPUkVHUk9VTkRfQ09MT1I7XHJcblxyXG4gICAgQElucHV0KCkgYmFja2dyb3VuZENvbG9yOiBzdHJpbmcgPSBERUZBVUxUUy5CQUNLR1JPVU5EX0NPTE9SO1xyXG5cclxuICAgIC8vIHsgXCI0MFwiIDogeyBjb2xvcjogXCJncmVlblwiLCBiZ09wYWNpdHk6IC4yIH0sIC4uLiB9XHJcbiAgICBASW5wdXQoKSB0aHJlc2hvbGRzOiBPYmplY3QgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xyXG5cclxuICAgIC8vIHsgXCIyNVwiOiB7IGNvbG9yOiAnI2NjYycsIHR5cGU6ICdsaW5lJywgc2l6ZTogOCwgbGFiZWw6IFwiMjUgbGJzXCIgfSwgLi4uIH1cclxuICAgIEBJbnB1dCgpIG1hcmtlcnM6IE9iamVjdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XHJcbiAgICBcclxuICAgIHByaXZhdGUgX3ZhbHVlOiBudW1iZXIgPSAwO1xyXG5cclxuICAgIEBJbnB1dCgpXHJcbiAgICBnZXQgdmFsdWUoKSB7IHJldHVybiB0aGlzLl92YWx1ZTsgfVxyXG4gICAgc2V0IHZhbHVlKHZhbDogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5fdmFsdWUgPSBjb2VyY2VOdW1iZXJQcm9wZXJ0eSh2YWwpO1xyXG4gICAgfVxyXG5cclxuICAgIEBJbnB1dCgpIGR1cmF0aW9uOiBudW1iZXIgPSAxMjAwO1xyXG5cclxuICAgIC8qKiBrZWVwIHRyYWNrIG9mIHByZXZpb3VzIHZhbHVlIGluIGNhc2Ugb2YgbmVnYXRpdmUgbnVtYmVycyBvciBtaXN0eXBlcyAqL1xyXG4gICAgcHJpdmF0ZSBfb2xkQ2hhbmdlVmFsOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBfZWxlbWVudFJlZjogRWxlbWVudFJlZiwgcHJpdmF0ZSBfcmVuZGVyZXI6IFJlbmRlcmVyMikgeyB9XHJcblxyXG4gICAgbmdPbkluaXQoKSB7XHJcbiAgICAgICAgLy8gaWYgbWFya2VycyBhcmUgdG8gYmUgYWRkZWQsIGJ1dCBubyBtYXJnaW4gc3BlY2lmaWVkIHRoZW4gaGVyZSB3ZSBhZGQgMTAgcHguXHJcbiAgICAgICAgaWYgKHRoaXMubWFya2VycyAmJiBPYmplY3Qua2V5cyh0aGlzLm1hcmtlcnMpLmxlbmd0aCA+IDAgJiYgIXRoaXMuX21hcmdpbikgdGhpcy5fbWFyZ2luID0gMTA7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xyXG4gICAgICAgIGNvbnN0IGlzQ2FudmFzUHJvcGVydHlDaGFuZ2VkID0gY2hhbmdlc1sndGhpY2snXSB8fCBjaGFuZ2VzWyd0eXBlJ10gfHwgY2hhbmdlc1snY2FwJ10gfHwgY2hhbmdlc1snc2l6ZSddO1xyXG4gICAgICAgIGNvbnN0IGlzRGF0YUNoYW5nZWQgPSBjaGFuZ2VzWyd2YWx1ZSddIHx8IGNoYW5nZXNbJ21pbiddIHx8IGNoYW5nZXNbJ21heCddO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5faW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICAgICAgaWYgKGlzRGF0YUNoYW5nZWQpIHtcclxuICAgICAgICAgICAgICAgIGxldCBudjtcclxuICAgICAgICAgICAgICAgIGlmIChjaGFuZ2VzWyd2YWx1ZSddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbnYgPSBOdW1iZXIoY2hhbmdlc1sndmFsdWUnXS5jdXJyZW50VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIG52ID0gaXNOYU4obnYpID8gMCA6IG52O1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXZWYWwgPSBOdW1iZXIoY2hhbmdlc1sndmFsdWUnXS5wcmV2aW91c1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbGRDaGFuZ2VWYWwgPSBpc05hTihwcmV2VmFsKSA/IHRoaXMuX29sZENoYW5nZVZhbCA6IHByZXZWYWw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGUobnYsIHRoaXMuX29sZENoYW5nZVZhbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlzQ2FudmFzUHJvcGVydHlDaGFuZ2VkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pbml0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfdXBkYXRlU2l6ZSgpIHtcclxuICAgICAgICB0aGlzLl9yZW5kZXJlci5zZXRTdHlsZSh0aGlzLl9lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQsICd3aWR0aCcsIGNzc1VuaXQodGhpcy5fZ2V0V2lkdGgoKSkpO1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyLnNldFN0eWxlKHRoaXMuX2VsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgJ2hlaWdodCcsIGNzc1VuaXQodGhpcy5fZ2V0Q2FudmFzSGVpZ2h0KCkpKTtcclxuICAgICAgICB0aGlzLl9jYW52YXMubmF0aXZlRWxlbWVudC53aWR0aCA9IHRoaXMuX2dldFdpZHRoKCk7XHJcbiAgICAgICAgdGhpcy5fY2FudmFzLm5hdGl2ZUVsZW1lbnQuaGVpZ2h0ID0gdGhpcy5fZ2V0Q2FudmFzSGVpZ2h0KCk7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIuc2V0U3R5bGUodGhpcy5fbGFiZWwubmF0aXZlRWxlbWVudCxcclxuICAgICAgICAgICAgJ3RyYW5zZm9ybScsICd0cmFuc2xhdGVZKCcgKyAodGhpcy5zaXplIC8gMyAqIDIgLSB0aGlzLnNpemUgLyAxMyAvIDQpICsgJ3B4KScpO1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyLnNldFN0eWxlKHRoaXMuX3JlYWRpbmcubmF0aXZlRWxlbWVudCxcclxuICAgICAgICAgICAgJ3RyYW5zZm9ybScsICd0cmFuc2xhdGVZKCcgKyAodGhpcy5zaXplIC8gMiAtIHRoaXMuc2l6ZSAqIDAuMjIgLyAyKSArICdweCknKTtcclxuICAgIH1cclxuXHJcbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2NhbnZhcykge1xyXG4gICAgICAgICAgICB0aGlzLl9pbml0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG5nT25EZXN0cm95KCkge1xyXG4gICAgICAgIHRoaXMuX2Rlc3Ryb3koKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9nZXRCb3VuZHModHlwZTogTmd4R2F1Z2VUeXBlKSB7XHJcbiAgICAgICAgbGV0IGhlYWQsIHRhaWwsIHN0YXJ0LCBlbmQ7XHJcbiAgICAgICAgaWYgKHR5cGUgPT0gJ3NlbWknKSB7XHJcbiAgICAgICAgICAgIGhlYWQgPSBNYXRoLlBJO1xyXG4gICAgICAgICAgICB0YWlsID0gMiAqIE1hdGguUEk7XHJcbiAgICAgICAgICAgIHN0YXJ0ID0gMTgwO1xyXG4gICAgICAgICAgICBlbmQgPSAzNjA7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09ICdmdWxsJykge1xyXG4gICAgICAgICAgICBoZWFkID0gMS41ICogTWF0aC5QSTtcclxuICAgICAgICAgICAgdGFpbCA9IDMuNSAqIE1hdGguUEk7XHJcbiAgICAgICAgICAgIHN0YXJ0ID0gMjcwO1xyXG4gICAgICAgICAgICBlbmQgPSBzdGFydCArIDM2MDtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdhcmNoJykge1xyXG4gICAgICAgICAgICBoZWFkID0gMC44ICogTWF0aC5QSTtcclxuICAgICAgICAgICAgdGFpbCA9IDIuMiAqIE1hdGguUEk7XHJcbiAgICAgICAgICAgIHN0YXJ0ID0gMTgwIC0gKDAuMiAqIDE4MCk7XHJcbiAgICAgICAgICAgIGVuZCA9IDM2MCArICgwLjIgKiAxODApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geyBoZWFkLCB0YWlsLCBzdGFydCwgZW5kIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfZHJhd1NoZWxsKHN0YXJ0OiBudW1iZXIsIG1pZGRsZTogbnVtYmVyLCB0YWlsOiBudW1iZXIsIGNvbG9yOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgY2VudGVyID0gdGhpcy5fZ2V0Q2VudGVyKCksXHJcbiAgICAgICAgICAgIHJhZGl1cyA9IHRoaXMuX2dldFJhZGl1cygpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5faW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fY2xlYXIoKTtcclxuICAgICAgICAgICAgdGhpcy5fZHJhd01hcmtlcnNBbmRUaWNrcygpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHJhbmdlcyA9IHRoaXMuX2dldEJhY2tncm91bmRDb2xvclJhbmdlcygpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fY29udGV4dC5saW5lV2lkdGggPSB0aGlzLnRoaWNrO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHJhbmdlcyAmJiByYW5nZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gaWYgYmFja2dyb3VuZCBjb2xvciBpcyBub3Qgc3BlY2lmaWVkIHRoZW4gdXNlIGRlZmF1bHQgYmFja2dyb3VuZCwgdW5sZXNzIG9wYWNpdHkgaXMgcHJvdmlkZWQgaW4gd2hpY2ggY2FzZSB1c2UgdGhlIGNvbG9yXHJcbiAgICAgICAgICAgICAgICAvLyBhbmQgb3BhY3RpdHkgYWdhaW5zdCBjb2xvciwgdG8gZm9ybSB0aGUgYmFja2dyb3VuZCBjb2xvci5cclxuICAgICAgICAgICAgICAgIHRoaXMuX2NvbnRleHQubGluZUNhcCA9ICdidXR0J1xyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCByID0gcmFuZ2VzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NvbnRleHQuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29udGV4dC5zdHJva2VTdHlsZSA9IHIuYmFja2dyb3VuZENvbG9yID8gci5iYWNrZ3JvdW5kQ29sb3IgOiAoci5iZ09wYWNpdHkpID8gci5jb2xvciA6IHRoaXMuYmFja2dyb3VuZENvbG9yO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyLmJnT3BhY2l0eSAhPT0gdW5kZWZpbmVkICYmIHIuYmdPcGFjaXR5ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NvbnRleHQuZ2xvYmFsQWxwaGEgPSByLmJnT3BhY2l0eTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29udGV4dC5hcmMoY2VudGVyLngsIGNlbnRlci55LCByYWRpdXMsIHRoaXMuX2dldERpc3BsYWNlbWVudChyLnN0YXJ0KSx0aGlzLl9nZXREaXNwbGFjZW1lbnQoci5lbmQpLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29udGV4dC5zdHJva2UoKTsgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb250ZXh0Lmdsb2JhbEFscGhhID0gMTsgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY29udGV4dC5saW5lQ2FwID0gdGhpcy5jYXA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jb250ZXh0LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY29udGV4dC5zdHJva2VTdHlsZSA9IHRoaXMuYmFja2dyb3VuZENvbG9yO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY29udGV4dC5hcmMoY2VudGVyLngsIGNlbnRlci55LCByYWRpdXMsIHN0YXJ0LCB0YWlsLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jb250ZXh0LnN0cm9rZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX2RyYXdGaWxsKHN0YXJ0LCBtaWRkbGUsIHRhaWwsIGNvbG9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfZHJhd0ZpbGwoc3RhcnQ6IG51bWJlciwgbWlkZGxlOiBudW1iZXIsIHRhaWw6IG51bWJlciwgY29sb3I6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBjZW50ZXIgPSB0aGlzLl9nZXRDZW50ZXIoKSxcclxuICAgICAgICAgICAgcmFkaXVzID0gdGhpcy5fZ2V0UmFkaXVzKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2NvbnRleHQubGluZUNhcCA9IHRoaXMuY2FwO1xyXG4gICAgICAgIHRoaXMuX2NvbnRleHQubGluZVdpZHRoID0gdGhpcy50aGljazsgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgbWlkZGxlID0gTWF0aC5tYXgobWlkZGxlLCBzdGFydCk7IC8vIG5ldmVyIGJlbG93IDAlXHJcbiAgICAgICAgbWlkZGxlID0gTWF0aC5taW4obWlkZGxlLCB0YWlsKTsgLy8gbmV2ZXIgZXhjZWVkIDEwMCVcclxuXHJcbiAgICAgICAgdGhpcy5fY29udGV4dC5saW5lQ2FwID0gdGhpcy5jYXA7XHJcbiAgICAgICAgdGhpcy5fY29udGV4dC5saW5lV2lkdGggPSB0aGlzLnRoaWNrO1xyXG5cclxuICAgICAgICB0aGlzLl9jb250ZXh0LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIHRoaXMuX2NvbnRleHQuc3Ryb2tlU3R5bGUgPSBjb2xvcjtcclxuICAgICAgICB0aGlzLl9jb250ZXh0LmFyYyhjZW50ZXIueCwgY2VudGVyLnksIHJhZGl1cywgc3RhcnQsIG1pZGRsZSwgZmFsc2UpO1xyXG4gICAgICAgIHRoaXMuX2NvbnRleHQuc3Ryb2tlKCk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2FkZE1hcmtlcihhbmdsZSxjb2xvcixsYWJlbD8sdHlwZT8sbGVuPyxmb250Pykge1xyXG5cclxuICAgICAgICB2YXIgcmFkID0gYW5nbGUgKiBNYXRoLlBJIC8gMTgwOyBcclxuXHJcbiAgICAgICAgbGV0IG9mZnNldCA9IDI7XHJcblxyXG4gICAgICAgIGlmICghbGVuKSBsZW4gPSA4O1xyXG5cclxuICAgICAgICBpZiAoIXR5cGUpIHR5cGUgPSAnbGluZSc7XHJcblxyXG4gICAgICAgIGxldCBjZW50ZXIgPSB0aGlzLl9nZXRDZW50ZXIoKSxcclxuICAgICAgICAgICAgcmFkaXVzID0gdGhpcy5fZ2V0UmFkaXVzKCk7XHJcblxyXG4gICAgICAgIGxldCB4ID0gIChyYWRpdXMgKyB0aGlzLnRoaWNrLzIgKyBvZmZzZXQpICogTWF0aC5jb3MocmFkKSArIGNlbnRlci54O1xyXG4gICAgICAgIGxldCB5ID0gIChyYWRpdXMgKyB0aGlzLnRoaWNrLzIgKyBvZmZzZXQpICogTWF0aC5zaW4ocmFkKSArIGNlbnRlci55OyAgICBcclxuICAgICAgICBsZXQgeDIgPSAocmFkaXVzICsgdGhpcy50aGljay8yICsgb2Zmc2V0ICsgbGVuKSAqIE1hdGguY29zKHJhZCkgKyBjZW50ZXIueDtcclxuICAgICAgICBsZXQgeTI9IChyYWRpdXMgKyB0aGlzLnRoaWNrLzIgKyBvZmZzZXQgKyBsZW4pICogTWF0aC5zaW4ocmFkKSArIGNlbnRlci55O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0eXBlID09ICd0cmlhbmdsZScpIHtcclxuXHJcbiAgICAgICAgICAgIC8vRHJhdyB0aGUgdHJpYW5nbGUgbWFya2VyXHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRleHQuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRleHQuc3Ryb2tlU3R5bGUgPSBjb2xvcjtcclxuICAgICAgICAgICAgdGhpcy5fY29udGV4dC5tb3ZlVG8oeCx5KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRleHQubGluZVdpZHRoID0gMTtcclxuXHJcbiAgICAgICAgICAgIGxldCBhMiA9IGFuZ2xlIC0gNDU7XHJcbiAgICAgICAgICAgIGxldCBhMyA9IGFuZ2xlICsgNDU7XHJcblxyXG4gICAgICAgICAgICBpZiAoYTIgPCAwKSBhMiArPSAzNjA7XHJcbiAgICAgICAgICAgIGlmIChhMiA+IDM2MCkgYTIgLT0gMzYwO1xyXG5cclxuICAgICAgICAgICAgaWYgKGEzIDwgMCkgYTMgKz0gMzYwO1xyXG4gICAgICAgICAgICBpZiAoYTMgPiAzNjApIGEzIC09IDM2MDtcclxuXHJcbiAgICAgICAgICAgIGxldCByYWQyID0gYTIgKiBNYXRoLlBJIC8gMTgwOyAgXHJcbiAgICAgICAgICAgIGxldCB4MyA9ICBsZW4gKiBNYXRoLmNvcyhyYWQyKSArIHg7XHJcbiAgICAgICAgICAgIGxldCB5MyA9ICBsZW4gKiBNYXRoLnNpbihyYWQyKSArIHk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRleHQubGluZVRvKHgzLHkzKTtcclxuXHJcbiAgICAgICAgICAgIGxldCByYWQzID0gYTMgKiBNYXRoLlBJIC8gMTgwOyAgXHJcbiAgICAgICAgICAgIGxldCB4NCA9ICBsZW4gKiBNYXRoLmNvcyhyYWQzKSArIHg7XHJcbiAgICAgICAgICAgIGxldCB5NCA9ICBsZW4gKiBNYXRoLnNpbihyYWQzKSArIHk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9jb250ZXh0LmxpbmVUbyh4NCx5NCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRleHQubGluZVRvKHgseSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9jb250ZXh0LmNsb3NlUGF0aCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9jb250ZXh0LnN0cm9rZSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fY29udGV4dC5maWxsU3R5bGUgPSBjb2xvcjtcclxuICAgICAgICAgICAgdGhpcy5fY29udGV4dC5maWxsKCk7XHJcblxyXG4gICAgICAgIH0gZWxzZSB7IC8vbGluZVxyXG4gICAgICAgICAgICB0aGlzLl9jb250ZXh0LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9jb250ZXh0LmxpbmVXaWR0aCA9IC41O1xyXG4gICAgICAgICAgICB0aGlzLl9jb250ZXh0LnN0cm9rZVN0eWxlID0gY29sb3I7XHJcbiAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRleHQubW92ZVRvKHgseSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRleHQubGluZVRvKHgyLHkyKTtcclxuICAgIFxyXG4gICAgICAgICAgICB0aGlzLl9jb250ZXh0LmNsb3NlUGF0aCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9jb250ZXh0LnN0cm9rZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGxhYmVsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRleHQuc2F2ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9jb250ZXh0LnRyYW5zbGF0ZSh4MiwgeTIpO1xyXG4gICAgICAgICAgICB0aGlzLl9jb250ZXh0LnJvdGF0ZSgoYW5nbGUgKyA5MCkgKiAoTWF0aC5QSSAvIDE4MCkpO1xyXG4gICAgICAgICAgICB0aGlzLl9jb250ZXh0LnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRleHQuZm9udCA9IChmb250KSA/IGZvbnQgOiAnMTNweCBBcmlhbCc7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRleHQuZmlsbFRleHQobGFiZWwsMCwtMyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRleHQucmVzdG9yZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfY2xlYXIoKSB7XHJcbiAgICAgICAgdGhpcy5fY29udGV4dC5jbGVhclJlY3QoMCwgMCwgdGhpcy5fZ2V0V2lkdGgoKSwgdGhpcy5fZ2V0SGVpZ2h0KCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2dldFdpZHRoKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNpemU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfZ2V0SGVpZ2h0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNpemU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY2FudmFzIGhlaWdodCB3aWxsIGJlIHNob3J0ZXIgZm9yIHR5cGUgJ3NlbWknIGFuZCAnYXJjaCdcclxuICAgIHByaXZhdGUgX2dldENhbnZhc0hlaWdodCgpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMudHlwZSA9PSAnYXJjaCcgfHwgdGhpcy50eXBlID09ICdzZW1pJylcclxuICAgICAgICAgICAgPyAwLjg1ICogdGhpcy5fZ2V0SGVpZ2h0KClcclxuICAgICAgICAgICAgOiB0aGlzLl9nZXRIZWlnaHQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9nZXRSYWRpdXMoKSB7XHJcbiAgICAgICAgY29uc3QgY2VudGVyID0gdGhpcy5fZ2V0Q2VudGVyKCk7XHJcbiAgICAgICAgdmFyIHJhZCA9IGNlbnRlci54IC0gdGhpcy50aGljaztcclxuICAgICAgICBpZiAodGhpcy5fbWFyZ2luID4gMCkgcmFkIC09IHRoaXMuX21hcmdpbjtcclxuICAgICAgICByZXR1cm4gcmFkO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2dldENlbnRlcigpIHtcclxuICAgICAgICB2YXIgeCA9IHRoaXMuX2dldFdpZHRoKCkgLyAyLFxyXG4gICAgICAgICAgICB5ID0gdGhpcy5fZ2V0SGVpZ2h0KCkgLyAyO1xyXG4gICAgICAgIHJldHVybiB7IHgsIHkgfTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9pbml0KCkge1xyXG4gICAgICAgIHRoaXMuX2NvbnRleHQgPSAodGhpcy5fY2FudmFzLm5hdGl2ZUVsZW1lbnQgYXMgSFRNTENhbnZhc0VsZW1lbnQpLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX3VwZGF0ZVNpemUoKTtcclxuICAgICAgICB0aGlzLl9jcmVhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9kZXN0cm95KCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9hbmltYXRpb25SZXF1ZXN0SUQpIHtcclxuICAgICAgICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuX2FuaW1hdGlvblJlcXVlc3RJRCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2FuaW1hdGlvblJlcXVlc3RJRCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2NsZWFyKCk7XHJcbiAgICAgICAgdGhpcy5fY29udGV4dCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9nZXRGb3JlZ3JvdW5kQ29sb3JCeVJhbmdlKHZhbHVlKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHRocmVzaCA9IHRoaXMuX2dldFRocmVzaG9sZE1hdGNoRm9yVmFsdWUodmFsdWUpO1xyXG4gICAgICAgIHJldHVybiB0aHJlc2ggJiYgdGhyZXNoLmNvbG9yID8gdGhyZXNoLmNvbG9yIDogdGhpcy5mb3JlZ3JvdW5kQ29sb3I7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfZ2V0VGhyZXNob2xkTWF0Y2hGb3JWYWx1ZSh2YWx1ZSkge1xyXG4gICAgICAgIGNvbnN0IG1hdGNoID0gT2JqZWN0LmtleXModGhpcy50aHJlc2hvbGRzKVxyXG4gICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiBpc051bWJlcihpdGVtKSAmJiBOdW1iZXIoaXRlbSkgPD0gdmFsdWUgfSlcclxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IE51bWJlcihhKSAtIE51bWJlcihiKSlcclxuICAgICAgICAgICAgLnJldmVyc2UoKVswXTtcclxuXHJcbiAgICAgICAgaWYgKG1hdGNoICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgY29uc3QgdGhyZXNoID0gdGhpcy50aHJlc2hvbGRzW21hdGNoXTtcclxuICAgICAgICAgICAgY29uc3QgdCA9IHtcclxuICAgICAgICAgICAgICAgIGNvbG9yOnRocmVzaC5jb2xvcixcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjp0aHJlc2guYmFja2dyb3VuZENvbG9yLFxyXG4gICAgICAgICAgICAgICAgYmdPcGFjaXR5OiB0aHJlc2guYmdPcGFjaXR5LFxyXG4gICAgICAgICAgICAgICAgc3RhcnQ6TnVtYmVyKG1hdGNoKSxcclxuICAgICAgICAgICAgICAgIGVuZDp0aGlzLl9nZXROZXh0VGhyZXNob2xkKE51bWJlcihtYXRjaCkpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybiB0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9nZXROZXh0VGhyZXNob2xkKHZhbHVlKSA6bnVtYmVyIHtcclxuICAgICAgICBjb25zdCBtYXRjaCA9IE9iamVjdC5rZXlzKHRoaXMudGhyZXNob2xkcylcclxuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gaXNOdW1iZXIoaXRlbSkgJiYgTnVtYmVyKGl0ZW0pID4gdmFsdWUgfSlcclxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IE51bWJlcihhKSAtIE51bWJlcihiKSkgXHJcblxyXG4gICAgICAgIGlmIChtYXRjaCAmJiBtYXRjaFswXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBOdW1iZXIobWF0Y2hbMF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF4O1xyXG4gICAgICAgIH0gICAgICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2dldEJhY2tncm91bmRDb2xvclJhbmdlcygpIHtcclxuXHJcbiAgICAgICAgbGV0IGkgPSAwLHJhbmdlcyA9IFtdO1xyXG4gICAgICAgIGRvIHtcclxuICAgICAgICAgICAgbGV0IHRocmVzaCA9IHRoaXMuX2dldFRocmVzaG9sZE1hdGNoRm9yVmFsdWUoaSk7XHJcbiAgICAgICAgICAgIGlmICh0aHJlc2gpIHtcclxuICAgICAgICAgICAgICAgIHJhbmdlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBzdGFydDp0aHJlc2guc3RhcnQsXHJcbiAgICAgICAgICAgICAgICAgICAgZW5kOnRocmVzaC5lbmQsXHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IHRocmVzaC5jb2xvcixcclxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRocmVzaC5iYWNrZ3JvdW5kQ29sb3IsXHJcbiAgICAgICAgICAgICAgICAgICAgYmdPcGFjaXR5OiB0aHJlc2guYmdPcGFjaXR5XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGkgPSB0aHJlc2guZW5kO1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPj0gdGhpcy5tYXgpIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgYnJlYWs7XHJcbiAgICAgICAgfSB3aGlsZSh0cnVlKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJhbmdlcztcclxuICAgIH1cclxuICAgIHByaXZhdGUgX2dldERpc3BsYWNlbWVudCh2Om51bWJlcikge1xyXG4gICAgICAgIGxldCAgdHlwZSA9IHRoaXMudHlwZSxcclxuICAgICAgICAgICAgYm91bmRzID0gdGhpcy5fZ2V0Qm91bmRzKHR5cGUpLFxyXG4gICAgICAgICAgICBtaW4gPSB0aGlzLm1pbixcclxuICAgICAgICAgICAgbWF4ID0gdGhpcy5tYXgsXHJcbiAgICAgICAgICAgIHN0YXJ0ID0gYm91bmRzLmhlYWQsXHJcbiAgICAgICAgICAgIHZhbHVlID0gY2xhbXAodiwgdGhpcy5taW4sIHRoaXMubWF4KSxcclxuICAgICAgICAgICAgdW5pdCA9IChib3VuZHMudGFpbCAtIGJvdW5kcy5oZWFkKSAvIChtYXggLSBtaW4pLFxyXG4gICAgICAgICAgICBkaXNwbGFjZW1lbnQgPSB1bml0ICogKHZhbHVlIC0gbWluKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gc3RhcnQgKyBkaXNwbGFjZW1lbnQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2NyZWF0ZShudj86IG51bWJlciwgb3Y/OiBudW1iZXIpIHtcclxuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgICAgICBjb25zdCB0eXBlID0gdGhpcy50eXBlO1xyXG4gICAgICAgIGNvbnN0IGJvdW5kcyA9IHRoaXMuX2dldEJvdW5kcyh0eXBlKTtcclxuICAgICAgICBjb25zdCBkdXJhdGlvbiA9IHRoaXMuZHVyYXRpb247XHJcbiAgICAgICAgY29uc3QgbWluID0gdGhpcy5taW47XHJcbiAgICAgICAgY29uc3QgbWF4ID0gdGhpcy5tYXg7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBjbGFtcCh0aGlzLnZhbHVlLCBtaW4sIG1heCk7XHJcbiAgICAgICAgY29uc3Qgc3RhcnQgPSBib3VuZHMuaGVhZDtcclxuICAgICAgICBjb25zdCB1bml0ID0gKGJvdW5kcy50YWlsIC0gYm91bmRzLmhlYWQpIC8gKG1heCAtIG1pbik7XHJcbiAgICAgICAgbGV0IGRpc3BsYWNlbWVudCA9IHVuaXQgKiAodmFsdWUgLSBtaW4pO1xyXG4gICAgICAgIGNvbnN0IHRhaWwgPSBib3VuZHMudGFpbDtcclxuICAgICAgICBjb25zdCBjb2xvciA9IHRoaXMuX2dldEZvcmVncm91bmRDb2xvckJ5UmFuZ2UodmFsdWUpO1xyXG4gICAgICAgIGxldCBzdGFydFRpbWU7XHJcblxyXG4gICAgICAgIGlmIChzZWxmLl9hbmltYXRpb25SZXF1ZXN0SUQpIHtcclxuICAgICAgICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHNlbGYuX2FuaW1hdGlvblJlcXVlc3RJRCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBhbmltYXRlID0gKHRpbWVzdGFtcDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgIHRpbWVzdGFtcCA9IHRpbWVzdGFtcCB8fCBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgICAgICAgICAgY29uc3QgcnVudGltZSA9IHRpbWVzdGFtcCAtIHN0YXJ0VGltZTtcclxuICAgICAgICAgICAgY29uc3QgcHJvZ3Jlc3MgPSBNYXRoLm1pbihydW50aW1lIC8gZHVyYXRpb24sIDEpO1xyXG4gICAgICAgICAgICBjb25zdCBwcmV2aW91c1Byb2dyZXNzID0gb3YgPyAob3YgLSBtaW4pICogdW5pdCA6IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IG1pZGRsZSA9IHN0YXJ0ICsgcHJldmlvdXNQcm9ncmVzcyArIGRpc3BsYWNlbWVudCAqIHByb2dyZXNzO1xyXG4gICAgICAgICAgICBzZWxmLl9kcmF3U2hlbGwoc3RhcnQsIG1pZGRsZSwgdGFpbCwgY29sb3IpO1xyXG4gICAgICAgICAgICBpZiAoc2VsZi5fYW5pbWF0aW9uUmVxdWVzdElEICYmIChydW50aW1lIDwgZHVyYXRpb24pKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9hbmltYXRpb25SZXF1ZXN0SUQgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCh0cykgPT4gYW5pbWF0ZSh0cykpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHNlbGYuX2FuaW1hdGlvblJlcXVlc3RJRCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fYW5pbWF0ZSkge1xyXG4gICAgICAgICAgICBpZiAobnYgIT09IHVuZGVmaW5lZCAmJiBvdiAhPT0gdW5kZWZpbmVkICYmIG92ICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGFjZW1lbnQgPSB1bml0ICogbnYgLSB1bml0ICogb3Y7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2VsZi5fYW5pbWF0aW9uUmVxdWVzdElEID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgodGltZXN0YW1wKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzdGFydFRpbWUgPSB0aW1lc3RhbXAgfHwgbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgICAgICAgICBhbmltYXRlKHN0YXJ0VGltZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNlbGYuX2RyYXdTaGVsbChzdGFydCwgc3RhcnQgKyBkaXNwbGFjZW1lbnQsIHRhaWwsIGNvbG9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfZHJhd01hcmtlcnNBbmRUaWNrcygpIHtcclxuICAgICAgICAvKlxyXG4gICAgICAgICAqIGV4YW1wbGU6XHJcbiAgICAgICAgdGhpcy5tYXJrZXJzID0ge1xyXG4gICAgICAgICAgICAnLTEwJzoge1xyXG4gICAgICAgICAgICAgICAgY29sb3I6ICcjNTU1JyxcclxuICAgICAgICAgICAgICAgIHNpemU6IDUsXHJcbiAgICAgICAgICAgICAgICBsYWJlbDogJy0xMCcsXHJcbiAgICAgICAgICAgICAgICBmb250OiAnMTFweCB2ZXJkYW5hJyxcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdsaW5lJyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJzEwJzoge1xyXG4gICAgICAgICAgICAgICAgY29sb3I6ICcjNTU1JyxcclxuICAgICAgICAgICAgICAgIHNpemU6IDUsXHJcbiAgICAgICAgICAgICAgICBsYWJlbDogJzEwJyxcclxuICAgICAgICAgICAgICAgIGZvbnQ6ICcxMXB4IHZlcmRhbmEnLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogJ2xpbmUnLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnMjAnOiB7XHJcbiAgICAgICAgICAgICAgICBjb2xvcjogJyM1NTUnLFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogNSxcclxuICAgICAgICAgICAgICAgIGxhYmVsOiAnMjAnLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogJ2xpbmUnLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgKi9cclxuICAgICAgICBpZiAodGhpcy5tYXJrZXJzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJvdW5kcyA9IHRoaXMuX2dldEJvdW5kcyh0aGlzLnR5cGUpO1xyXG4gICAgICAgICAgICBjb25zdCBkZWdyZWVzID0gKGJvdW5kcy5lbmQgLSBib3VuZHMuc3RhcnQpO1xyXG4gICAgICAgICAgICBjb25zdCBwZXJEID0gIGRlZ3JlZXMgLyAodGhpcy5tYXggLSB0aGlzLm1pbik7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgbXYgaW4gdGhpcy5tYXJrZXJzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gTnVtYmVyKG12KSAtIHRoaXMubWluO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYW5nbGUgPSBib3VuZHMuc3RhcnQgKyBuICogcGVyRDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG0gPSB0aGlzLm1hcmtlcnNbbXZdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYWRkTWFya2VyKGFuZ2xlLG0uY29sb3IsbS5sYWJlbCxtLnR5cGUsbS5zaXplLG0uZm9udCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfdXBkYXRlKG52OiBudW1iZXIsIG92OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLl9jbGVhcigpO1xyXG4gICAgICAgIHRoaXMuX2NyZWF0ZShudiwgb3YpO1xyXG4gICAgfVxyXG5cclxufVxyXG4iLCI8ZGl2IGNsYXNzPVwicmVhZGluZy1ibG9ja1wiICNyZWFkaW5nIFtzdHlsZS5mb250U2l6ZV09XCIoc2l6ZS0obWFyZ2luKjIpKSAqIDAuMjIgKyAncHgnXCI+XHJcbiAgPCEtLSBUaGlzIGJsb2NrIGNhbiBub3QgYmUgaW5kZW50ZWQgY29ycmVjdGx5LCBiZWNhdXNlIGxpbmUgYnJlYWtzIGNhdXNlIGxheW91dCBzcGFjaW5nLCByZWxhdGVkIHByb2JsZW06IGh0dHBzOi8vcHQuc3RhY2tvdmVyZmxvdy5jb20vcS8yNzY3NjAvMjk5OCAtLT5cclxuICA8dSBjbGFzcz1cInJlYWRpbmctYWZmaXhcIiBbbmdTd2l0Y2hdPVwiX3ByZXBlbmRDaGlsZCAhPSBudWxsXCI+PG5nLWNvbnRlbnQgc2VsZWN0PVwibmd4LWdhdWdlLXByZXBlbmRcIiAqbmdTd2l0Y2hDYXNlPVwidHJ1ZVwiPjwvbmctY29udGVudD48bmctY29udGFpbmVyICpuZ1N3aXRjaENhc2U9XCJmYWxzZVwiPnt7cHJlcGVuZH19PC9uZy1jb250YWluZXI+PC91PjxuZy1jb250YWluZXIgW25nU3dpdGNoXT1cIl92YWx1ZURpc3BsYXlDaGlsZCAhPSBudWxsXCI+PG5nLWNvbnRlbnQgKm5nU3dpdGNoQ2FzZT1cInRydWVcIiBzZWxlY3Q9XCJuZ3gtZ2F1Z2UtdmFsdWVcIj48L25nLWNvbnRlbnQ+PG5nLWNvbnRhaW5lciAqbmdTd2l0Y2hDYXNlPVwiZmFsc2VcIj57e3ZhbHVlIHwgbnVtYmVyfX08L25nLWNvbnRhaW5lcj48L25nLWNvbnRhaW5lcj48dSBjbGFzcz1cInJlYWRpbmctYWZmaXhcIiBbbmdTd2l0Y2hdPVwiX2FwcGVuZENoaWxkICE9IG51bGxcIj48bmctY29udGVudCBzZWxlY3Q9XCJuZ3gtZ2F1Z2UtYXBwZW5kXCIgKm5nU3dpdGNoQ2FzZT1cInRydWVcIj48L25nLWNvbnRlbnQ+PG5nLWNvbnRhaW5lciAqbmdTd2l0Y2hDYXNlPVwiZmFsc2VcIj57e2FwcGVuZH19PC9uZy1jb250YWluZXI+PC91PlxyXG48L2Rpdj5cclxuPGRpdiBjbGFzcz1cInJlYWRpbmctbGFiZWxcIiAjckxhYmVsXHJcbiAgICAgW3N0eWxlLmZvbnRTaXplXT1cIihzaXplLShtYXJnaW4qMikpIC8gMTMgKyAncHgnXCJcclxuICAgICBbbmdTd2l0Y2hdPVwiX2xhYmVsQ2hpbGQgIT0gbnVsbFwiPlxyXG4gIDxuZy1jb250ZW50IHNlbGVjdD1cIm5neC1nYXVnZS1sYWJlbFwiICpuZ1N3aXRjaENhc2U9XCJ0cnVlXCI+PC9uZy1jb250ZW50PlxyXG4gIDxuZy1jb250YWluZXIgKm5nU3dpdGNoQ2FzZT1cImZhbHNlXCI+e3tsYWJlbH19PC9uZy1jb250YWluZXI+XHJcbjwvZGl2PlxyXG48Y2FudmFzICNjYW52YXM+PC9jYW52YXM+XHJcbiJdfQ==