import { ChangeDetectionStrategy, Component, effect, inject } from '@angular/core';
import { fromPromise } from 'rxjs/internal/observable/innerFrom';
import { TrackXDirective, TrackYDirective } from '../track/track';
import { ThumbXDirective, ThumbYDirective } from '../thumb/thumb';
import { SCROLLBAR_CONTROL, ScrollbarAdapter } from './scrollbar-adapter';
import { ScrollbarButton } from '../button/scrollbar-button.component';
import { ScrollbarManager } from '../utils/scrollbar-manager';
import * as i0 from "@angular/core";
export class ScrollbarY extends ScrollbarAdapter {
    constructor() {
        super(...arguments);
        this.clientRectProperty = 'top';
        this.sizeProperty = 'offsetHeight';
        this.clientProperty = 'clientY';
        this.offsetProperty = 'offsetY';
        this.axis = 'y';
    }
    get viewportScrollMax() {
        return this.cmp.viewport.scrollMaxY;
    }
    get viewportScrollOffset() {
        return this.cmp.viewport.scrollTop;
    }
    scrollTo(top, duration) {
        return fromPromise(this.cmp.scrollTo({ top, duration }));
    }
    instantScrollTo(value) {
        this.cmp.viewport.scrollYTo(value);
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.3.3", ngImport: i0, type: ScrollbarY, deps: null, target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "17.3.3", type: ScrollbarY, isStandalone: true, selector: "scrollbar-y", providers: [
            { provide: SCROLLBAR_CONTROL, useExisting: ScrollbarY }
        ], usesInheritance: true, ngImport: i0, template: `
    <div #sticky class="ng-scrollbar-sticky">
      <div class="ng-scrollbar-track-wrapper">
        <div scrollbarTrackY class="ng-scrollbar-track {{ cmp.trackClass }}">
          <div scrollbarThumbY class="ng-scrollbar-thumb {{ cmp.thumbClass }}"></div>
        </div>
        @if (cmp.buttons()) {
          <button class="ng-scrollbar-button {{ cmp.buttonClass }}"
                  scrollbarButton="top"
                  scrollDirection="backward"></button>
          <button class="ng-scrollbar-button {{ cmp.buttonClass }}"
                  scrollbarButton="bottom"
                  scrollDirection="forward"></button>
        }
      </div>
    </div>
  `, isInline: true, styles: [":host{position:absolute;inset:0;pointer-events:none;min-width:calc(var(--viewport-width) * 1px);min-height:calc(var(--viewport-height) * 1px)}.ng-scrollbar-sticky{top:calc(var(--_scrollbar-wrapper-top) * 1px);left:calc(var(--_scrollbar-wrapper-left) * 1px);right:calc(var(--_scrollbar-wrapper-right) * 1px);height:calc(var(--_scrollbar-wrapper-height) * 1px);width:calc(var(--_scrollbar-wrapper-width) * 1px);position:sticky;z-index:100;opacity:var(--_scrollbar-hover-opacity);transition:var(--_scrollbar-opacity-transition)}.ng-scrollbar-track-wrapper{touch-action:none;-webkit-user-select:none;user-select:none;top:var(--_scrollbar-track-top);bottom:var(--_scrollbar-track-bottom);right:var(--_scrollbar-track-right);left:var(--_scrollbar-track-left);pointer-events:var(--_scrollbar-pointer-events);transition:var(--scrollbar-track-wrapper-transition);position:absolute;overflow:hidden;display:flex;place-items:center}.ng-scrollbar-track{position:relative;width:100%;height:100%;background-color:var(--scrollbar-track-color);border-radius:var(--scrollbar-border-radius);cursor:default;z-index:1;order:2}.ng-scrollbar-thumb{box-sizing:border-box;position:absolute;transition:var(--scrollbar-thumb-transition);border-radius:var(--scrollbar-border-radius);height:var(--_thumb-height);width:var(--_thumb-width);animation-name:scrollbarThumbAnimation;animation-duration:1ms;animation-timing-function:linear}@keyframes scrollbarThumbAnimation{0%{translate:var(--_scrollbar-thumb-transform-from)}to{translate:var(--_scrollbar-thumb-transform-to)}}\n", ":host{--_scrollbar-wrapper-top: 0;--_scrollbar-wrapper-left: var(--_scrollbar-wrapper-y-left);--_scrollbar-wrapper-right: var(--_scrollbar-wrapper-y-right);--_scrollbar-wrapper-height: var(--viewport-height);--_scrollbar-wrapper-width: var(--_scrollbar-thickness);--_scrollbar-track-top: var(--_vertical-top);--_scrollbar-track-bottom: var(--_vertical-bottom);--_scrollbar-track-right: var(--_vertical-right);--_scrollbar-track-left: var(--_vertical-left);--_thumb-height: calc(var(--thumb-y-length) * 1px);--_thumb-width: 100%;--_scrollbar-thumb-transform-from: 0 0;--_scrollbar-thumb-transform-to: 0 calc(var(--_scrollbar-y-thumb-transform-to-value) * 1px)}.ng-scrollbar-track-wrapper{width:var(--_track-y-thickness);flex-direction:column}.ng-scrollbar-track-wrapper:hover{--_track-y-thickness: var(--_scrollbar-hover-thickness-px);--_thumb-y-color: var(--scrollbar-thumb-hover-color)}.ng-scrollbar-thumb{animation-timeline:var(--_animation-timeline-y);min-height:calc(var(--scrollbar-thumb-min-size) * 1px);display:var(--_vertical-thumb-display);background-color:var(--_thumb-y-color)}\n"], dependencies: [{ kind: "directive", type: TrackYDirective, selector: "[scrollbarTrackY]" }, { kind: "directive", type: ThumbYDirective, selector: "[scrollbarThumbY]" }, { kind: "component", type: ScrollbarButton, selector: "button[scrollbarButton]", inputs: ["scrollbarButton", "scrollDirection"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.3.3", ngImport: i0, type: ScrollbarY, decorators: [{
            type: Component,
            args: [{ standalone: true, selector: 'scrollbar-y', template: `
    <div #sticky class="ng-scrollbar-sticky">
      <div class="ng-scrollbar-track-wrapper">
        <div scrollbarTrackY class="ng-scrollbar-track {{ cmp.trackClass }}">
          <div scrollbarThumbY class="ng-scrollbar-thumb {{ cmp.thumbClass }}"></div>
        </div>
        @if (cmp.buttons()) {
          <button class="ng-scrollbar-button {{ cmp.buttonClass }}"
                  scrollbarButton="top"
                  scrollDirection="backward"></button>
          <button class="ng-scrollbar-button {{ cmp.buttonClass }}"
                  scrollbarButton="bottom"
                  scrollDirection="forward"></button>
        }
      </div>
    </div>
  `, imports: [TrackYDirective, ThumbYDirective, ScrollbarButton], providers: [
                        { provide: SCROLLBAR_CONTROL, useExisting: ScrollbarY }
                    ], changeDetection: ChangeDetectionStrategy.OnPush, styles: [":host{position:absolute;inset:0;pointer-events:none;min-width:calc(var(--viewport-width) * 1px);min-height:calc(var(--viewport-height) * 1px)}.ng-scrollbar-sticky{top:calc(var(--_scrollbar-wrapper-top) * 1px);left:calc(var(--_scrollbar-wrapper-left) * 1px);right:calc(var(--_scrollbar-wrapper-right) * 1px);height:calc(var(--_scrollbar-wrapper-height) * 1px);width:calc(var(--_scrollbar-wrapper-width) * 1px);position:sticky;z-index:100;opacity:var(--_scrollbar-hover-opacity);transition:var(--_scrollbar-opacity-transition)}.ng-scrollbar-track-wrapper{touch-action:none;-webkit-user-select:none;user-select:none;top:var(--_scrollbar-track-top);bottom:var(--_scrollbar-track-bottom);right:var(--_scrollbar-track-right);left:var(--_scrollbar-track-left);pointer-events:var(--_scrollbar-pointer-events);transition:var(--scrollbar-track-wrapper-transition);position:absolute;overflow:hidden;display:flex;place-items:center}.ng-scrollbar-track{position:relative;width:100%;height:100%;background-color:var(--scrollbar-track-color);border-radius:var(--scrollbar-border-radius);cursor:default;z-index:1;order:2}.ng-scrollbar-thumb{box-sizing:border-box;position:absolute;transition:var(--scrollbar-thumb-transition);border-radius:var(--scrollbar-border-radius);height:var(--_thumb-height);width:var(--_thumb-width);animation-name:scrollbarThumbAnimation;animation-duration:1ms;animation-timing-function:linear}@keyframes scrollbarThumbAnimation{0%{translate:var(--_scrollbar-thumb-transform-from)}to{translate:var(--_scrollbar-thumb-transform-to)}}\n", ":host{--_scrollbar-wrapper-top: 0;--_scrollbar-wrapper-left: var(--_scrollbar-wrapper-y-left);--_scrollbar-wrapper-right: var(--_scrollbar-wrapper-y-right);--_scrollbar-wrapper-height: var(--viewport-height);--_scrollbar-wrapper-width: var(--_scrollbar-thickness);--_scrollbar-track-top: var(--_vertical-top);--_scrollbar-track-bottom: var(--_vertical-bottom);--_scrollbar-track-right: var(--_vertical-right);--_scrollbar-track-left: var(--_vertical-left);--_thumb-height: calc(var(--thumb-y-length) * 1px);--_thumb-width: 100%;--_scrollbar-thumb-transform-from: 0 0;--_scrollbar-thumb-transform-to: 0 calc(var(--_scrollbar-y-thumb-transform-to-value) * 1px)}.ng-scrollbar-track-wrapper{width:var(--_track-y-thickness);flex-direction:column}.ng-scrollbar-track-wrapper:hover{--_track-y-thickness: var(--_scrollbar-hover-thickness-px);--_thumb-y-color: var(--scrollbar-thumb-hover-color)}.ng-scrollbar-thumb{animation-timeline:var(--_animation-timeline-y);min-height:calc(var(--scrollbar-thumb-min-size) * 1px);display:var(--_vertical-thumb-display);background-color:var(--_thumb-y-color)}\n"] }]
        }] });
export class ScrollbarX extends ScrollbarAdapter {
    get viewportScrollMax() {
        return this.cmp.viewport.scrollMaxX;
    }
    get viewportScrollOffset() {
        // Keep scrollLeft value positive for horizontal scrollbar
        return Math.abs(this.cmp.viewport.scrollLeft);
    }
    constructor() {
        effect(() => {
            if (this.cmp.direction() === 'rtl') {
                this.handlePosition = (position, scrollMax) => -(scrollMax - position);
            }
            else {
                this.handlePosition = (position) => position;
            }
        });
        super();
        this.manager = inject(ScrollbarManager);
        this.clientRectProperty = 'left';
        this.sizeProperty = 'offsetWidth';
        this.clientProperty = 'clientX';
        this.offsetProperty = 'offsetX';
        this.axis = 'x';
    }
    scrollTo(left, duration) {
        return fromPromise(this.cmp.scrollTo({ left, duration }));
    }
    instantScrollTo(value, scrollMax) {
        this.cmp.viewport.scrollXTo(this.handlePosition(value, scrollMax));
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.3.3", ngImport: i0, type: ScrollbarX, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "17.3.3", type: ScrollbarX, isStandalone: true, selector: "scrollbar-x", host: { properties: { "attr.dir": "cmp.direction()" } }, providers: [
            { provide: SCROLLBAR_CONTROL, useExisting: ScrollbarX }
        ], usesInheritance: true, ngImport: i0, template: `
    <div #sticky class="ng-scrollbar-sticky">
      <div class="ng-scrollbar-track-wrapper">
        <div scrollbarTrackX class="ng-scrollbar-track {{ cmp.trackClass }}">
          <div scrollbarThumbX class="ng-scrollbar-thumb {{ cmp.thumbClass }}"></div>
        </div>
        @if (cmp.buttons()) {
          <button class="ng-scrollbar-button {{ cmp.buttonClass }}"
                  scrollbarButton="start"
                  scrollDirection="backward"></button>
          <button class="ng-scrollbar-button {{ cmp.buttonClass }}"
                  scrollbarButton="end"
                  scrollDirection="forward"></button>
        }
      </div>
    </div>
  `, isInline: true, styles: [":host{position:absolute;inset:0;pointer-events:none;min-width:calc(var(--viewport-width) * 1px);min-height:calc(var(--viewport-height) * 1px)}.ng-scrollbar-sticky{top:calc(var(--_scrollbar-wrapper-top) * 1px);left:calc(var(--_scrollbar-wrapper-left) * 1px);right:calc(var(--_scrollbar-wrapper-right) * 1px);height:calc(var(--_scrollbar-wrapper-height) * 1px);width:calc(var(--_scrollbar-wrapper-width) * 1px);position:sticky;z-index:100;opacity:var(--_scrollbar-hover-opacity);transition:var(--_scrollbar-opacity-transition)}.ng-scrollbar-track-wrapper{touch-action:none;-webkit-user-select:none;user-select:none;top:var(--_scrollbar-track-top);bottom:var(--_scrollbar-track-bottom);right:var(--_scrollbar-track-right);left:var(--_scrollbar-track-left);pointer-events:var(--_scrollbar-pointer-events);transition:var(--scrollbar-track-wrapper-transition);position:absolute;overflow:hidden;display:flex;place-items:center}.ng-scrollbar-track{position:relative;width:100%;height:100%;background-color:var(--scrollbar-track-color);border-radius:var(--scrollbar-border-radius);cursor:default;z-index:1;order:2}.ng-scrollbar-thumb{box-sizing:border-box;position:absolute;transition:var(--scrollbar-thumb-transition);border-radius:var(--scrollbar-border-radius);height:var(--_thumb-height);width:var(--_thumb-width);animation-name:scrollbarThumbAnimation;animation-duration:1ms;animation-timing-function:linear}@keyframes scrollbarThumbAnimation{0%{translate:var(--_scrollbar-thumb-transform-from)}to{translate:var(--_scrollbar-thumb-transform-to)}}\n", ":host{--_scrollbar-wrapper-top: var(--_scrollbar-wrapper-x-top);--_scrollbar-wrapper-left: 0;--_scrollbar-wrapper-right: 0;--_scrollbar-wrapper-height: var(--_scrollbar-thickness);--_scrollbar-wrapper-width: var(--viewport-width);--_scrollbar-track-top: var(--_horizontal-top);--_scrollbar-track-bottom: var(--_horizontal-bottom);--_scrollbar-track-right: var(--_horizontal-right);--_scrollbar-track-left: var(--_horizontal-left);--_thumb-height: 100%;--_thumb-width: calc(var(--thumb-x-length) * 1px);--_scrollbar-thumb-transform-from: 0;--_scrollbar-thumb-transform-to: calc(var(--_scrollbar-x-thumb-transform-to-value) * 1px)}:host .ng-scrollbar-button[scrollbarButton=start]{_--button-rotate:90}:host .ng-scrollbar-button[scrollbarButton=end]{_--button-rotate:-90}:host[dir=rtl] .ng-scrollbar-thumb{animation-name:scrollbarThumbRTLAnimation;will-change:right;--_scrollbar-thumb-transform-to: calc(var(--_scrollbar-x-thumb-transform-to-value) * -1px)}:host[dir=rtl] .ng-scrollbar-button[scrollbarButton=start]{--_button-rotate: 90deg}:host[dir=rtl] .ng-scrollbar-button[scrollbarButton=end]{--_button-rotate: -90deg}.ng-scrollbar-track-wrapper{height:var(--_track-x-thickness);flex-direction:row}.ng-scrollbar-track-wrapper:hover{--_track-x-thickness: var(--_scrollbar-hover-thickness-px);--_thumb-x-color: var(--scrollbar-thumb-hover-color)}.ng-scrollbar-thumb{animation-timeline:var(--_animation-timeline-x);min-width:calc(var(--scrollbar-thumb-min-size) * 1px);display:var(--_horizontal-thumb-display);background-color:var(--_thumb-x-color)}@keyframes scrollbarThumbRTLAnimation{0%{right:var(--_scrollbar-thumb-transform-from)}to{right:calc(var(--_scrollbar-thumb-transform-to) * -1)}}\n"], dependencies: [{ kind: "directive", type: TrackXDirective, selector: "[scrollbarTrackX]" }, { kind: "directive", type: ThumbXDirective, selector: "[scrollbarThumbX]" }, { kind: "component", type: ScrollbarButton, selector: "button[scrollbarButton]", inputs: ["scrollbarButton", "scrollDirection"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.3.3", ngImport: i0, type: ScrollbarX, decorators: [{
            type: Component,
            args: [{ standalone: true, selector: 'scrollbar-x', host: { '[attr.dir]': 'cmp.direction()' }, template: `
    <div #sticky class="ng-scrollbar-sticky">
      <div class="ng-scrollbar-track-wrapper">
        <div scrollbarTrackX class="ng-scrollbar-track {{ cmp.trackClass }}">
          <div scrollbarThumbX class="ng-scrollbar-thumb {{ cmp.thumbClass }}"></div>
        </div>
        @if (cmp.buttons()) {
          <button class="ng-scrollbar-button {{ cmp.buttonClass }}"
                  scrollbarButton="start"
                  scrollDirection="backward"></button>
          <button class="ng-scrollbar-button {{ cmp.buttonClass }}"
                  scrollbarButton="end"
                  scrollDirection="forward"></button>
        }
      </div>
    </div>
  `, imports: [TrackXDirective, ThumbXDirective, ScrollbarButton], providers: [
                        { provide: SCROLLBAR_CONTROL, useExisting: ScrollbarX }
                    ], changeDetection: ChangeDetectionStrategy.OnPush, styles: [":host{position:absolute;inset:0;pointer-events:none;min-width:calc(var(--viewport-width) * 1px);min-height:calc(var(--viewport-height) * 1px)}.ng-scrollbar-sticky{top:calc(var(--_scrollbar-wrapper-top) * 1px);left:calc(var(--_scrollbar-wrapper-left) * 1px);right:calc(var(--_scrollbar-wrapper-right) * 1px);height:calc(var(--_scrollbar-wrapper-height) * 1px);width:calc(var(--_scrollbar-wrapper-width) * 1px);position:sticky;z-index:100;opacity:var(--_scrollbar-hover-opacity);transition:var(--_scrollbar-opacity-transition)}.ng-scrollbar-track-wrapper{touch-action:none;-webkit-user-select:none;user-select:none;top:var(--_scrollbar-track-top);bottom:var(--_scrollbar-track-bottom);right:var(--_scrollbar-track-right);left:var(--_scrollbar-track-left);pointer-events:var(--_scrollbar-pointer-events);transition:var(--scrollbar-track-wrapper-transition);position:absolute;overflow:hidden;display:flex;place-items:center}.ng-scrollbar-track{position:relative;width:100%;height:100%;background-color:var(--scrollbar-track-color);border-radius:var(--scrollbar-border-radius);cursor:default;z-index:1;order:2}.ng-scrollbar-thumb{box-sizing:border-box;position:absolute;transition:var(--scrollbar-thumb-transition);border-radius:var(--scrollbar-border-radius);height:var(--_thumb-height);width:var(--_thumb-width);animation-name:scrollbarThumbAnimation;animation-duration:1ms;animation-timing-function:linear}@keyframes scrollbarThumbAnimation{0%{translate:var(--_scrollbar-thumb-transform-from)}to{translate:var(--_scrollbar-thumb-transform-to)}}\n", ":host{--_scrollbar-wrapper-top: var(--_scrollbar-wrapper-x-top);--_scrollbar-wrapper-left: 0;--_scrollbar-wrapper-right: 0;--_scrollbar-wrapper-height: var(--_scrollbar-thickness);--_scrollbar-wrapper-width: var(--viewport-width);--_scrollbar-track-top: var(--_horizontal-top);--_scrollbar-track-bottom: var(--_horizontal-bottom);--_scrollbar-track-right: var(--_horizontal-right);--_scrollbar-track-left: var(--_horizontal-left);--_thumb-height: 100%;--_thumb-width: calc(var(--thumb-x-length) * 1px);--_scrollbar-thumb-transform-from: 0;--_scrollbar-thumb-transform-to: calc(var(--_scrollbar-x-thumb-transform-to-value) * 1px)}:host .ng-scrollbar-button[scrollbarButton=start]{_--button-rotate:90}:host .ng-scrollbar-button[scrollbarButton=end]{_--button-rotate:-90}:host[dir=rtl] .ng-scrollbar-thumb{animation-name:scrollbarThumbRTLAnimation;will-change:right;--_scrollbar-thumb-transform-to: calc(var(--_scrollbar-x-thumb-transform-to-value) * -1px)}:host[dir=rtl] .ng-scrollbar-button[scrollbarButton=start]{--_button-rotate: 90deg}:host[dir=rtl] .ng-scrollbar-button[scrollbarButton=end]{--_button-rotate: -90deg}.ng-scrollbar-track-wrapper{height:var(--_track-x-thickness);flex-direction:row}.ng-scrollbar-track-wrapper:hover{--_track-x-thickness: var(--_scrollbar-hover-thickness-px);--_thumb-x-color: var(--scrollbar-thumb-hover-color)}.ng-scrollbar-thumb{animation-timeline:var(--_animation-timeline-x);min-width:calc(var(--scrollbar-thumb-min-size) * 1px);display:var(--_horizontal-thumb-display);background-color:var(--_thumb-x-color)}@keyframes scrollbarThumbRTLAnimation{0%{right:var(--_scrollbar-thumb-transform-from)}to{right:calc(var(--_scrollbar-thumb-transform-to) * -1)}}\n"] }]
        }], ctorParameters: () => [] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2Nyb2xsYmFyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbmd4LXNjcm9sbGJhci9zcmMvbGliL3Njcm9sbGJhci9zY3JvbGxiYXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLHVCQUF1QixFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRW5GLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxvQ0FBb0MsQ0FBQztBQUNqRSxPQUFPLEVBQUUsZUFBZSxFQUFFLGVBQWUsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ2xFLE9BQU8sRUFBRSxlQUFlLEVBQUUsZUFBZSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDbEUsT0FBTyxFQUFFLGlCQUFpQixFQUFFLGdCQUFnQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDMUUsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHNDQUFzQyxDQUFDO0FBQ3ZFLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLDRCQUE0QixDQUFDOztBQTZCOUQsTUFBTSxPQUFPLFVBQVcsU0FBUSxnQkFBZ0I7SUEzQmhEOztRQTZCVyx1QkFBa0IsR0FBbUIsS0FBSyxDQUFDO1FBRTNDLGlCQUFZLEdBQW1DLGNBQWMsQ0FBQztRQUU5RCxtQkFBYyxHQUEwQixTQUFTLENBQUM7UUFFbEQsbUJBQWMsR0FBMEIsU0FBUyxDQUFDO1FBRWxELFNBQUksR0FBYyxHQUFHLENBQUM7S0FpQmhDO0lBZkMsSUFBSSxpQkFBaUI7UUFDbkIsT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUM7SUFDdEMsQ0FBQztJQUVELElBQUksb0JBQW9CO1FBQ3RCLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDO0lBQ3JDLENBQUM7SUFFRCxRQUFRLENBQUMsR0FBVyxFQUFFLFFBQWdC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LFdBRVEsQ0FBQyxlQUFlLEVBQUUsZUFBZSxFQUFFLGVBQWUsQ0FBQyxhQUNqRDt3QkFDVCxFQUFFLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxXQUFXLFlBQVksRUFBRTtxQkFDeEQsbUJBQ2dCLHVCQUF1QixDQUFDLE1BQU0iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgQ29tcG9uZW50LCBlZmZlY3QsIGluamVjdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IGZyb21Qcm9taXNlIH0gZnJvbSAncnhqcy9pbnRlcm5hbC9vYnNlcnZhYmxlL2lubmVyRnJvbSc7XHJcbmltcG9ydCB7IFRyYWNrWERpcmVjdGl2ZSwgVHJhY2tZRGlyZWN0aXZlIH0gZnJvbSAnLi4vdHJhY2svdHJhY2snO1xyXG5pbXBvcnQgeyBUaHVtYlhEaXJlY3RpdmUsIFRodW1iWURpcmVjdGl2ZSB9IGZyb20gJy4uL3RodW1iL3RodW1iJztcclxuaW1wb3J0IHsgU0NST0xMQkFSX0NPTlRST0wsIFNjcm9sbGJhckFkYXB0ZXIgfSBmcm9tICcuL3Njcm9sbGJhci1hZGFwdGVyJztcclxuaW1wb3J0IHsgU2Nyb2xsYmFyQnV0dG9uIH0gZnJvbSAnLi4vYnV0dG9uL3Njcm9sbGJhci1idXR0b24uY29tcG9uZW50JztcclxuaW1wb3J0IHsgU2Nyb2xsYmFyTWFuYWdlciB9IGZyb20gJy4uL3V0aWxzL3Njcm9sbGJhci1tYW5hZ2VyJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHN0YW5kYWxvbmU6IHRydWUsXHJcbiAgc2VsZWN0b3I6ICdzY3JvbGxiYXIteScsXHJcbiAgdGVtcGxhdGU6IGBcclxuICAgIDxkaXYgI3N0aWNreSBjbGFzcz1cIm5nLXNjcm9sbGJhci1zdGlja3lcIj5cclxuICAgICAgPGRpdiBjbGFzcz1cIm5nLXNjcm9sbGJhci10cmFjay13cmFwcGVyXCI+XHJcbiAgICAgICAgPGRpdiBzY3JvbGxiYXJUcmFja1kgY2xhc3M9XCJuZy1zY3JvbGxiYXItdHJhY2sge3sgY21wLnRyYWNrQ2xhc3MgfX1cIj5cclxuICAgICAgICAgIDxkaXYgc2Nyb2xsYmFyVGh1bWJZIGNsYXNzPVwibmctc2Nyb2xsYmFyLXRodW1iIHt7IGNtcC50aHVtYkNsYXNzIH19XCI+PC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgQGlmIChjbXAuYnV0dG9ucygpKSB7XHJcbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwibmctc2Nyb2xsYmFyLWJ1dHRvbiB7eyBjbXAuYnV0dG9uQ2xhc3MgfX1cIlxyXG4gICAgICAgICAgICAgICAgICBzY3JvbGxiYXJCdXR0b249XCJ0b3BcIlxyXG4gICAgICAgICAgICAgICAgICBzY3JvbGxEaXJlY3Rpb249XCJiYWNrd2FyZFwiPjwvYnV0dG9uPlxyXG4gICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cIm5nLXNjcm9sbGJhci1idXR0b24ge3sgY21wLmJ1dHRvbkNsYXNzIH19XCJcclxuICAgICAgICAgICAgICAgICAgc2Nyb2xsYmFyQnV0dG9uPVwiYm90dG9tXCJcclxuICAgICAgICAgICAgICAgICAgc2Nyb2xsRGlyZWN0aW9uPVwiZm9yd2FyZFwiPjwvYnV0dG9uPlxyXG4gICAgICAgIH1cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICBgLFxyXG4gIHN0eWxlVXJsczogWycuL3NoYXJlZC5zY3NzJywgJy4vdmVydGljYWwuc2NzcyddLFxyXG4gIGltcG9ydHM6IFtUcmFja1lEaXJlY3RpdmUsIFRodW1iWURpcmVjdGl2ZSwgU2Nyb2xsYmFyQnV0dG9uXSxcclxuICBwcm92aWRlcnM6IFtcclxuICAgIHsgcHJvdmlkZTogU0NST0xMQkFSX0NPTlRST0wsIHVzZUV4aXN0aW5nOiBTY3JvbGxiYXJZIH1cclxuICBdLFxyXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBTY3JvbGxiYXJZIGV4dGVuZHMgU2Nyb2xsYmFyQWRhcHRlciB7XHJcblxyXG4gIHJlYWRvbmx5IGNsaWVudFJlY3RQcm9wZXJ0eTogJ2xlZnQnIHwgJ3RvcCcgPSAndG9wJztcclxuXHJcbiAgcmVhZG9ubHkgc2l6ZVByb3BlcnR5OiAnb2Zmc2V0V2lkdGgnIHwgJ29mZnNldEhlaWdodCcgPSAnb2Zmc2V0SGVpZ2h0JztcclxuXHJcbiAgcmVhZG9ubHkgY2xpZW50UHJvcGVydHk6ICdjbGllbnRYJyB8ICdjbGllbnRZJyA9ICdjbGllbnRZJztcclxuXHJcbiAgcmVhZG9ubHkgb2Zmc2V0UHJvcGVydHk6ICdvZmZzZXRYJyB8ICdvZmZzZXRZJyA9ICdvZmZzZXRZJztcclxuXHJcbiAgcmVhZG9ubHkgYXhpczogJ3gnIHwgJ3knID0gJ3knO1xyXG5cclxuICBnZXQgdmlld3BvcnRTY3JvbGxNYXgoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLmNtcC52aWV3cG9ydC5zY3JvbGxNYXhZO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHZpZXdwb3J0U2Nyb2xsT2Zmc2V0KCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5jbXAudmlld3BvcnQuc2Nyb2xsVG9wO1xyXG4gIH1cclxuXHJcbiAgc2Nyb2xsVG8odG9wOiBudW1iZXIsIGR1cmF0aW9uOiBudW1iZXIpOiBPYnNlcnZhYmxlPHZvaWQ+IHtcclxuICAgIHJldHVybiBmcm9tUHJvbWlzZSh0aGlzLmNtcC5zY3JvbGxUbyh7IHRvcCwgZHVyYXRpb24gfSkpO1xyXG4gIH1cclxuXHJcbiAgaW5zdGFudFNjcm9sbFRvKHZhbHVlOiBudW1iZXIpOiB2b2lkIHtcclxuICAgIHRoaXMuY21wLnZpZXdwb3J0LnNjcm9sbFlUbyh2YWx1ZSk7XHJcbiAgfVxyXG59XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzdGFuZGFsb25lOiB0cnVlLFxyXG4gIHNlbGVjdG9yOiAnc2Nyb2xsYmFyLXgnLFxyXG4gIGhvc3Q6IHsgJ1thdHRyLmRpcl0nOiAnY21wLmRpcmVjdGlvbigpJyB9LFxyXG4gIHRlbXBsYXRlOiBgXHJcbiAgICA8ZGl2ICNzdGlja3kgY2xhc3M9XCJuZy1zY3JvbGxiYXItc3RpY2t5XCI+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJuZy1zY3JvbGxiYXItdHJhY2std3JhcHBlclwiPlxyXG4gICAgICAgIDxkaXYgc2Nyb2xsYmFyVHJhY2tYIGNsYXNzPVwibmctc2Nyb2xsYmFyLXRyYWNrIHt7IGNtcC50cmFja0NsYXNzIH19XCI+XHJcbiAgICAgICAgICA8ZGl2IHNjcm9sbGJhclRodW1iWCBjbGFzcz1cIm5nLXNjcm9sbGJhci10aHVtYiB7eyBjbXAudGh1bWJDbGFzcyB9fVwiPjwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIEBpZiAoY21wLmJ1dHRvbnMoKSkge1xyXG4gICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cIm5nLXNjcm9sbGJhci1idXR0b24ge3sgY21wLmJ1dHRvbkNsYXNzIH19XCJcclxuICAgICAgICAgICAgICAgICAgc2Nyb2xsYmFyQnV0dG9uPVwic3RhcnRcIlxyXG4gICAgICAgICAgICAgICAgICBzY3JvbGxEaXJlY3Rpb249XCJiYWNrd2FyZFwiPjwvYnV0dG9uPlxyXG4gICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cIm5nLXNjcm9sbGJhci1idXR0b24ge3sgY21wLmJ1dHRvbkNsYXNzIH19XCJcclxuICAgICAgICAgICAgICAgICAgc2Nyb2xsYmFyQnV0dG9uPVwiZW5kXCJcclxuICAgICAgICAgICAgICAgICAgc2Nyb2xsRGlyZWN0aW9uPVwiZm9yd2FyZFwiPjwvYnV0dG9uPlxyXG4gICAgICAgIH1cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICBgLFxyXG4gIHN0eWxlVXJsczogWycuL3NoYXJlZC5zY3NzJywgJy4vaG9yaXpvbnRhbC5zY3NzJ10sXHJcbiAgaW1wb3J0czogW1RyYWNrWERpcmVjdGl2ZSwgVGh1bWJYRGlyZWN0aXZlLCBTY3JvbGxiYXJCdXR0b25dLFxyXG4gIHByb3ZpZGVyczogW1xyXG4gICAgeyBwcm92aWRlOiBTQ1JPTExCQVJfQ09OVFJPTCwgdXNlRXhpc3Rpbmc6IFNjcm9sbGJhclggfVxyXG4gIF0sXHJcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcclxufSlcclxuZXhwb3J0IGNsYXNzIFNjcm9sbGJhclggZXh0ZW5kcyBTY3JvbGxiYXJBZGFwdGVyIHtcclxuXHJcbiAgcmVhZG9ubHkgbWFuYWdlcjogU2Nyb2xsYmFyTWFuYWdlciA9IGluamVjdChTY3JvbGxiYXJNYW5hZ2VyKTtcclxuXHJcbiAgcmVhZG9ubHkgY2xpZW50UmVjdFByb3BlcnR5OiAnbGVmdCcgfCAndG9wJyA9ICdsZWZ0JztcclxuXHJcbiAgcmVhZG9ubHkgc2l6ZVByb3BlcnR5OiAnb2Zmc2V0V2lkdGgnIHwgJ29mZnNldEhlaWdodCcgPSAnb2Zmc2V0V2lkdGgnO1xyXG5cclxuICByZWFkb25seSBjbGllbnRQcm9wZXJ0eTogJ2NsaWVudFgnIHwgJ2NsaWVudFknID0gJ2NsaWVudFgnO1xyXG5cclxuICByZWFkb25seSBvZmZzZXRQcm9wZXJ0eTogJ29mZnNldFgnIHwgJ29mZnNldFknID0gJ29mZnNldFgnO1xyXG5cclxuICByZWFkb25seSBheGlzOiAneCcgfCAneScgPSAneCc7XHJcblxyXG4gIC8vIEhhbmRsZSBkcmFnZ2luZyBwb3NpdGlvbiAoU3VwcG9ydCBMVFIgYW5kIFJUTCBkaXJlY3Rpb25zIGZvciB0aGUgaG9yaXpvbnRhbCBzY3JvbGxiYXIpXHJcbiAgcHJpdmF0ZSBoYW5kbGVQb3NpdGlvbjogKHZhbHVlOiBudW1iZXIsIHNjcm9sbE1heDogbnVtYmVyKSA9PiBudW1iZXI7XHJcblxyXG4gIGdldCB2aWV3cG9ydFNjcm9sbE1heCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuY21wLnZpZXdwb3J0LnNjcm9sbE1heFg7XHJcbiAgfVxyXG5cclxuICBnZXQgdmlld3BvcnRTY3JvbGxPZmZzZXQoKTogbnVtYmVyIHtcclxuICAgIC8vIEtlZXAgc2Nyb2xsTGVmdCB2YWx1ZSBwb3NpdGl2ZSBmb3IgaG9yaXpvbnRhbCBzY3JvbGxiYXJcclxuICAgIHJldHVybiBNYXRoLmFicyh0aGlzLmNtcC52aWV3cG9ydC5zY3JvbGxMZWZ0KTtcclxuICB9XHJcblxyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgZWZmZWN0KCgpID0+IHtcclxuICAgICAgaWYgKHRoaXMuY21wLmRpcmVjdGlvbigpID09PSAncnRsJykge1xyXG4gICAgICAgIHRoaXMuaGFuZGxlUG9zaXRpb24gPSAocG9zaXRpb246IG51bWJlciwgc2Nyb2xsTWF4OiBudW1iZXIpOiBudW1iZXIgPT4gLShzY3JvbGxNYXggLSBwb3NpdGlvbik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVQb3NpdGlvbiA9IChwb3NpdGlvbjogbnVtYmVyKTogbnVtYmVyID0+IHBvc2l0aW9uO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHN1cGVyKCk7XHJcbiAgfVxyXG5cclxuICBzY3JvbGxUbyhsZWZ0OiBudW1iZXIsIGR1cmF0aW9uOiBudW1iZXIpOiBPYnNlcnZhYmxlPHZvaWQ+IHtcclxuICAgIHJldHVybiBmcm9tUHJvbWlzZSh0aGlzLmNtcC5zY3JvbGxUbyh7IGxlZnQsIGR1cmF0aW9uIH0pKTtcclxuICB9XHJcblxyXG4gIGluc3RhbnRTY3JvbGxUbyh2YWx1ZTogbnVtYmVyLCBzY3JvbGxNYXg/OiBudW1iZXIpOiB2b2lkIHtcclxuICAgIHRoaXMuY21wLnZpZXdwb3J0LnNjcm9sbFhUbyh0aGlzLmhhbmRsZVBvc2l0aW9uKHZhbHVlLCBzY3JvbGxNYXgpKTtcclxuICB9XHJcbn1cclxuIl19