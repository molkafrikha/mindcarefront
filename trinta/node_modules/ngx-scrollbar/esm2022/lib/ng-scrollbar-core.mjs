import { Directive, Input, Output, inject, signal, effect, computed, numberAttribute, booleanAttribute, runInInjectionContext, input, EventEmitter, ElementRef, NgZone, Injector } from '@angular/core';
import { Platform } from '@angular/cdk/platform';
import { Directionality } from '@angular/cdk/bidi';
import { toSignal } from '@angular/core/rxjs-interop';
import { map, tap } from 'rxjs';
import { SmoothScrollManager } from 'ngx-scrollbar/smooth-scroll';
import { NG_SCROLLBAR } from './utils/scrollbar-base';
import { resizeObserver, ViewportAdapter } from './viewport';
import { ScrollbarUpdateReason, NG_SCROLLBAR_OPTIONS } from './ng-scrollbar.model';
import * as i0 from "@angular/core";
const defaultOptions = {
    trackClass: '',
    thumbClass: '',
    buttonClass: '',
    orientation: 'auto',
    appearance: 'native',
    visibility: 'native',
    position: 'native',
    trackScrollDuration: 50,
    sensorThrottleTime: 0,
    disableSensor: false,
    disableInteraction: false,
    buttons: false
};
export class NgScrollbarCore {
    constructor() {
        /** Injected options */
        this.injectedOptions = inject(NG_SCROLLBAR_OPTIONS, { optional: true });
        /** Combine injected option with default options */
        this.options = this.injectedOptions ? { ...defaultOptions, ...this.injectedOptions } : defaultOptions;
        this.zone = inject(NgZone);
        this.platform = inject(Platform);
        this.injector = inject(Injector);
        /** A flag that indicates if the platform is mobile */
        this.isMobile = this.platform.IOS || this.platform.ANDROID;
        this.dir = inject(Directionality);
        this.smoothScroll = inject(SmoothScrollManager);
        this.nativeElement = inject((ElementRef)).nativeElement;
        /**
         * Indicates when scrollbar thumb is being dragged
         */
        this.dragging = signal('none');
        /**
         * Sets the supported scroll track of the viewport, there are 3 options:
         *
         * - `vertical` Use both vertical and horizontal scrollbar
         * - `horizontal` Use both vertical and horizontal scrollbar
         * - `auto` Use both vertical and horizontal scrollbar
         */
        this.orientation = input(this.options.orientation);
        /**
         * When to show the scrollbar, and there are 3 options:
         *
         * - `native` (default) Scrollbar will be visible when viewport is scrollable like with native scrollbar
         * - `hover` Scrollbars are hidden by default, only visible on scrolling or hovering
         * - `always` Scrollbars are always shown even if the viewport is not scrollable
         */
        this.visibility = input(this.options.visibility);
        /** Show scrollbar buttons */
        this.buttons = input(this.options.buttons, {
            transform: booleanAttribute
        });
        /** Disables scrollbar interaction like dragging thumb and jumping by track click */
        this.disableInteraction = input(this.options.disableInteraction, {
            transform: booleanAttribute
        });
        /** Whether ResizeObserver is disabled */
        this.disableSensor = input(this.options.disableSensor, {
            transform: booleanAttribute
        });
        /** Throttle interval for detecting changes via ResizeObserver */
        this.sensorThrottleTime = input(this.options.sensorThrottleTime, {
            transform: numberAttribute
        });
        this.viewportDimension = signal({
            contentHeight: 0,
            contentWidth: 0,
            offsetHeight: 0,
            offsetWidth: 0
        });
        this.state = computed(() => {
            let verticalUsed = false;
            let horizontalUsed = false;
            let isVerticallyScrollable = false;
            let isHorizontallyScrollable = false;
            const orientation = this.orientation();
            const visibility = this.visibility();
            const viewport = this.viewportDimension();
            // Check if vertical scrollbar should be displayed
            if (orientation === 'auto' || orientation === 'vertical') {
                isVerticallyScrollable = viewport.contentHeight > viewport.offsetHeight;
                verticalUsed = visibility === 'visible' || isVerticallyScrollable;
            }
            // Check if horizontal scrollbar should be displayed
            if (orientation === 'auto' || orientation === 'horizontal') {
                isHorizontallyScrollable = viewport.contentWidth > viewport.offsetWidth;
                horizontalUsed = visibility === 'visible' || isHorizontallyScrollable;
            }
            return {
                verticalUsed,
                horizontalUsed,
                isVerticallyScrollable,
                isHorizontallyScrollable,
            };
        });
        this.isVerticallyScrollable = computed(() => this.state().isVerticallyScrollable);
        this.isHorizontallyScrollable = computed(() => this.state().isHorizontallyScrollable);
        this.verticalUsed = computed(() => this.state().verticalUsed);
        this.horizontalUsed = computed(() => this.state().horizontalUsed);
        /** Scroll duration when the scroll track is clicked */
        this.trackScrollDuration = this.options.trackScrollDuration;
        /**
         *  Sets the appearance of the scrollbar, there are 2 options:
         *
         * - `native` (default) scrollbar space will be reserved just like with native scrollbar.
         * - `compact` scrollbar doesn't reserve any space, they are placed over the viewport.
         */
        this.appearance = this.options.appearance;
        /**
         * Sets the position of each scrollbar, there are 4 options:
         *
         * - `native` (Default) Use the default position like in native scrollbar.
         * - `invertY` Inverts vertical scrollbar position
         * - `invertX` Inverts Horizontal scrollbar position
         * - `invertAll` Inverts both scrollbar positions
         */
        this.position = this.options.position;
        /** A class forwarded to the scrollbar track element */
        this.trackClass = this.options.trackClass;
        /** A class forwarded to the scrollbar thumb element */
        this.thumbClass = this.options.thumbClass;
        /** A class forwarded to the scrollbar button element */
        this.buttonClass = this.options.thumbClass;
        /** Steam that emits when scrollbar is initialized */
        this.afterInit = new EventEmitter();
        /** Steam that emits when scrollbar is updated */
        this.afterUpdate = new EventEmitter();
        /** Viewport adapter instance */
        this.viewport = new ViewportAdapter();
    }
    ngOnInit() {
        runInInjectionContext(this.injector, () => {
            // The direction signal cannot be initialized in the constructor
            // Because it initially returns 'ltr' even if dir.value is 'rtl`
            this.direction = toSignal(this.dir.change.pipe(map(() => this.dir.value)), { initialValue: this.dir.value });
            effect((onCleanup) => {
                // Check whether sensor should be enabled
                if (this.disableSensor()) {
                    // If sensor is disabled update manually
                    this.sizeChangeSub?.unsubscribe();
                }
                else {
                    if (this.platform.isBrowser && this.viewport.initialized()) {
                        this.sizeChangeSub?.unsubscribe();
                        this.zone.runOutsideAngular(() => {
                            this.sizeChangeSub = resizeObserver({
                                element: this.viewport.nativeElement,
                                contentWrapper: this.viewport.contentWrapperElement,
                                throttleDuration: this.sensorThrottleTime()
                            }).pipe(tap((reason) => this.update(reason))).subscribe();
                        });
                    }
                }
                onCleanup(() => this.sizeChangeSub?.unsubscribe());
            });
        });
    }
    ngAfterViewInit() {
        // If sensor is disabled, update to evaluate the state
        if (this.platform.isBrowser && this.disableSensor()) {
            // In case of 3rd party library, need to wait for content to be rendered
            requestAnimationFrame(() => {
                this.update(ScrollbarUpdateReason.AfterInit);
            });
        }
    }
    /**
     * Update local state and the internal scrollbar controls
     */
    update(reason) {
        this.updateCSSVariables();
        this.zone.run(() => {
            this.viewportDimension.set({
                contentHeight: this.viewport.contentHeight,
                contentWidth: this.viewport.contentWidth,
                offsetHeight: this.viewport.offsetHeight,
                offsetWidth: this.viewport.offsetWidth
            });
            if (reason === ScrollbarUpdateReason.AfterInit) {
                this.afterInit.emit();
            }
            else {
                this.afterUpdate.emit();
            }
        });
    }
    /**
     * Smooth scroll functions
     */
    scrollTo(options) {
        return this.smoothScroll.scrollTo(this.viewport.nativeElement, options);
    }
    /**
     * Scroll to element by reference or selector
     */
    scrollToElement(target, options) {
        return this.smoothScroll.scrollToElement(this.viewport.nativeElement, target, options);
    }
    /**
     * Update Essential CSS variables
     */
    updateCSSVariables() {
        this.nativeElement.style.setProperty('--content-height', `${this.viewport.contentHeight}`);
        this.nativeElement.style.setProperty('--content-width', `${this.viewport.contentWidth}`);
        this.nativeElement.style.setProperty('--viewport-height', `${this.viewport.offsetHeight}`);
        this.nativeElement.style.setProperty('--viewport-width', `${this.viewport.offsetWidth}`);
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.3.3", ngImport: i0, type: NgScrollbarCore, deps: [], target: i0.ɵɵFactoryTarget.Directive }); }
    static { this.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "17.1.0", version: "17.3.3", type: NgScrollbarCore, inputs: { orientation: { classPropertyName: "orientation", publicName: "orientation", isSignal: true, isRequired: false, transformFunction: null }, visibility: { classPropertyName: "visibility", publicName: "visibility", isSignal: true, isRequired: false, transformFunction: null }, buttons: { classPropertyName: "buttons", publicName: "buttons", isSignal: true, isRequired: false, transformFunction: null }, disableInteraction: { classPropertyName: "disableInteraction", publicName: "disableInteraction", isSignal: true, isRequired: false, transformFunction: null }, disableSensor: { classPropertyName: "disableSensor", publicName: "disableSensor", isSignal: true, isRequired: false, transformFunction: null }, sensorThrottleTime: { classPropertyName: "sensorThrottleTime", publicName: "sensorThrottleTime", isSignal: true, isRequired: false, transformFunction: null }, trackScrollDuration: { classPropertyName: "trackScrollDuration", publicName: "trackScrollDuration", isSignal: false, isRequired: false, transformFunction: numberAttribute }, appearance: { classPropertyName: "appearance", publicName: "appearance", isSignal: false, isRequired: false, transformFunction: null }, position: { classPropertyName: "position", publicName: "position", isSignal: false, isRequired: false, transformFunction: null }, trackClass: { classPropertyName: "trackClass", publicName: "trackClass", isSignal: false, isRequired: false, transformFunction: null }, thumbClass: { classPropertyName: "thumbClass", publicName: "thumbClass", isSignal: false, isRequired: false, transformFunction: null }, buttonClass: { classPropertyName: "buttonClass", publicName: "buttonClass", isSignal: false, isRequired: false, transformFunction: null } }, outputs: { afterInit: "afterInit", afterUpdate: "afterUpdate" }, host: { properties: { "class.ng-scrollbar": "true", "attr.verticalUsed": "verticalUsed()", "attr.horizontalUsed": "horizontalUsed()", "attr.isVerticallyScrollable": "isVerticallyScrollable()", "attr.isHorizontallyScrollable": "isHorizontallyScrollable()", "attr.mobile": "isMobile", "attr.dir": "direction()", "attr.position": "position", "attr.dragging": "dragging()", "attr.appearance": "appearance", "attr.visibility": "visibility()", "attr.orientation": "orientation()", "attr.disableInteraction": "disableInteraction()" } }, providers: [{ provide: NG_SCROLLBAR, useExisting: NgScrollbarCore }], ngImport: i0 }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.3.3", ngImport: i0, type: NgScrollbarCore, decorators: [{
            type: Directive,
            args: [{
                    host: {
                        '[class.ng-scrollbar]': 'true',
                        '[attr.verticalUsed]': 'verticalUsed()',
                        '[attr.horizontalUsed]': 'horizontalUsed()',
                        '[attr.isVerticallyScrollable]': 'isVerticallyScrollable()',
                        '[attr.isHorizontallyScrollable]': 'isHorizontallyScrollable()',
                        '[attr.mobile]': 'isMobile',
                        '[attr.dir]': 'direction()',
                        '[attr.position]': 'position',
                        '[attr.dragging]': 'dragging()',
                        '[attr.appearance]': 'appearance',
                        '[attr.visibility]': 'visibility()',
                        '[attr.orientation]': 'orientation()',
                        '[attr.disableInteraction]': 'disableInteraction()'
                    },
                    providers: [{ provide: NG_SCROLLBAR, useExisting: NgScrollbarCore }]
                }]
        }], propDecorators: { trackScrollDuration: [{
                type: Input,
                args: [{ transform: numberAttribute }]
            }], appearance: [{
                type: Input
            }], position: [{
                type: Input
            }], trackClass: [{
                type: Input
            }], thumbClass: [{
                type: Input
            }], buttonClass: [{
                type: Input
            }], afterInit: [{
                type: Output
            }], afterUpdate: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmctc2Nyb2xsYmFyLWNvcmUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9uZ3gtc2Nyb2xsYmFyL3NyYy9saWIvbmctc2Nyb2xsYmFyLWNvcmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNMLFNBQVMsRUFDVCxLQUFLLEVBQ0wsTUFBTSxFQUNOLE1BQU0sRUFDTixNQUFNLEVBQ04sTUFBTSxFQUNOLFFBQVEsRUFDUixlQUFlLEVBQ2YsZ0JBQWdCLEVBQ2hCLHFCQUFxQixFQUNyQixLQUFLLEVBQ0wsWUFBWSxFQUdaLFVBQVUsRUFDVixNQUFNLEVBR04sUUFBUSxFQUlULE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUNqRCxPQUFPLEVBQWEsY0FBYyxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDOUQsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQ3RELE9BQU8sRUFBZ0IsR0FBRyxFQUFFLEdBQUcsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUM5QyxPQUFPLEVBRUwsbUJBQW1CLEVBR3BCLE1BQU0sNkJBQTZCLENBQUM7QUFFckMsT0FBTyxFQUFnQixZQUFZLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUNwRSxPQUFPLEVBQUUsY0FBYyxFQUFFLGVBQWUsRUFBRSxNQUFNLFlBQVksQ0FBQztBQUU3RCxPQUFPLEVBSUwscUJBQXFCLEVBR3JCLG9CQUFvQixFQUNyQixNQUFNLHNCQUFzQixDQUFDOztBQUU5QixNQUFNLGNBQWMsR0FBdUI7SUFDekMsVUFBVSxFQUFFLEVBQUU7SUFDZCxVQUFVLEVBQUUsRUFBRTtJQUNkLFdBQVcsRUFBRSxFQUFFO0lBQ2YsV0FBVyxFQUFFLE1BQU07SUFDbkIsVUFBVSxFQUFFLFFBQVE7SUFDcEIsVUFBVSxFQUFFLFFBQVE7SUFDcEIsUUFBUSxFQUFFLFFBQVE7SUFDbEIs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O3NCQUFsQixLQUFLO2dCQUVHLFdBQVc7c0JBQW5CLEtBQUs7Z0JBR0ksU0FBUztzQkFBbEIsTUFBTTtnQkFHRyxXQUFXO3NCQUFwQixNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICBEaXJlY3RpdmUsXHJcbiAgSW5wdXQsXHJcbiAgT3V0cHV0LFxyXG4gIGluamVjdCxcclxuICBzaWduYWwsXHJcbiAgZWZmZWN0LFxyXG4gIGNvbXB1dGVkLFxyXG4gIG51bWJlckF0dHJpYnV0ZSxcclxuICBib29sZWFuQXR0cmlidXRlLFxyXG4gIHJ1bkluSW5qZWN0aW9uQ29udGV4dCxcclxuICBpbnB1dCxcclxuICBFdmVudEVtaXR0ZXIsXHJcbiAgT25Jbml0LFxyXG4gIEFmdGVyVmlld0luaXQsXHJcbiAgRWxlbWVudFJlZixcclxuICBOZ1pvbmUsXHJcbiAgU2lnbmFsLFxyXG4gIElucHV0U2lnbmFsLFxyXG4gIEluamVjdG9yLFxyXG4gIFdyaXRhYmxlU2lnbmFsLFxyXG4gIEVmZmVjdENsZWFudXBSZWdpc3RlckZuLFxyXG4gIElucHV0U2lnbmFsV2l0aFRyYW5zZm9ybVxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBQbGF0Zm9ybSB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9wbGF0Zm9ybSc7XHJcbmltcG9ydCB7IERpcmVjdGlvbiwgRGlyZWN0aW9uYWxpdHkgfSBmcm9tICdAYW5ndWxhci9jZGsvYmlkaSc7XHJcbmltcG9ydCB7IHRvU2lnbmFsIH0gZnJvbSAnQGFuZ3VsYXIvY29yZS9yeGpzLWludGVyb3AnO1xyXG5pbXBvcnQgeyBTdWJzY3JpcHRpb24sIG1hcCwgdGFwIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7XHJcbiAgU21vb3RoU2Nyb2xsRWxlbWVudCxcclxuICBTbW9vdGhTY3JvbGxNYW5hZ2VyLFxyXG4gIFNtb290aFNjcm9sbFRvRWxlbWVudE9wdGlvbnMsXHJcbiAgU21vb3RoU2Nyb2xsVG9PcHRpb25zXHJcbn0gZnJvbSAnbmd4LXNjcm9sbGJhci9zbW9vdGgtc2Nyb2xsJztcclxuaW1wb3J0IHsgU2Nyb2xsYmFycyB9IGZyb20gJy4vc2Nyb2xsYmFycy9zY3JvbGxiYXJzJztcclxuaW1wb3J0IHsgX05nU2Nyb2xsYmFyLCBOR19TQ1JPTExCQVIgfSBmcm9tICcuL3V0aWxzL3Njcm9sbGJhci1iYXNlJztcclxuaW1wb3J0IHsgcmVzaXplT2JzZXJ2ZXIsIFZpZXdwb3J0QWRhcHRlciB9IGZyb20gJy4vdmlld3BvcnQnO1xyXG5pbXBvcnQgeyBTY3JvbGxiYXJEcmFnZ2luZywgVmlld3BvcnRCb3VuZGFyaWVzIH0gZnJvbSAnLi91dGlscy9jb21tb24nO1xyXG5pbXBvcnQge1xyXG4gIFNjcm9sbGJhckFwcGVhcmFuY2UsXHJcbiAgU2Nyb2xsYmFyUG9zaXRpb24sXHJcbiAgU2Nyb2xsYmFyT3JpZW50YXRpb24sXHJcbiAgU2Nyb2xsYmFyVXBkYXRlUmVhc29uLFxyXG4gIFNjcm9sbGJhclZpc2liaWxpdHksXHJcbiAgTmdTY3JvbGxiYXJPcHRpb25zLFxyXG4gIE5HX1NDUk9MTEJBUl9PUFRJT05TXHJcbn0gZnJvbSAnLi9uZy1zY3JvbGxiYXIubW9kZWwnO1xyXG5cclxuY29uc3QgZGVmYXVsdE9wdGlvbnM6IE5nU2Nyb2xsYmFyT3B0aW9ucyA9IHtcclxuICB0cmFja0NsYXNzOiAnJyxcclxuICB0aHVtYkNsYXNzOiAnJyxcclxuICBidXR0b25DbGFzczogJycsXHJcbiAgb3JpZW50YXRpb246ICdhdXRvJyxcclxuICBhcHBlYXJhbmNlOiAnbmF0aXZlJyxcclxuICB2aXNpYmlsaXR5OiAnbmF0aXZlJyxcclxuICBwb3NpdGlvbjogJ25hdGl2ZScsXHJcbiAgdHJhY2tTY3JvbGxEdXJhdGlvbjogNTAsXHJcbiAgc2Vuc29yVGhyb3R0bGVUaW1lOiAwLFxyXG4gIGRpc2FibGVTZW5zb3I6IGZhbHNlLFxyXG4gIGRpc2FibGVJbnRlcmFjdGlvbjogZmFsc2UsXHJcbiAgYnV0dG9uczogZmFsc2VcclxufTtcclxuXHJcbmludGVyZmFjZSBWaWV3cG9ydFN0YXRlIHtcclxuICB2ZXJ0aWNhbFVzZWQ6IGJvb2xlYW4sXHJcbiAgaG9yaXpvbnRhbFVzZWQ6IGJvb2xlYW4sXHJcbiAgaXNWZXJ0aWNhbGx5U2Nyb2xsYWJsZTogYm9vbGVhbixcclxuICBpc0hvcml6b250YWxseVNjcm9sbGFibGU6IGJvb2xlYW4sXHJcbn1cclxuXHJcbkBEaXJlY3RpdmUoe1xyXG4gIGhvc3Q6IHtcclxuICAgICdbY2xhc3Mubmctc2Nyb2xsYmFyXSc6ICd0cnVlJyxcclxuICAgICdbYXR0ci52ZXJ0aWNhbFVzZWRdJzogJ3ZlcnRpY2FsVXNlZCgpJyxcclxuICAgICdbYXR0ci5ob3Jpem9udGFsVXNlZF0nOiAnaG9yaXpvbnRhbFVzZWQoKScsXHJcbiAgICAnW2F0dHIuaXNWZXJ0aWNhbGx5U2Nyb2xsYWJsZV0nOiAnaXNWZXJ0aWNhbGx5U2Nyb2xsYWJsZSgpJyxcclxuICAgICdbYXR0ci5pc0hvcml6b250YWxseVNjcm9sbGFibGVdJzogJ2lzSG9yaXpvbnRhbGx5U2Nyb2xsYWJsZSgpJyxcclxuICAgICdbYXR0ci5tb2JpbGVdJzogJ2lzTW9iaWxlJyxcclxuICAgICdbYXR0ci5kaXJdJzogJ2RpcmVjdGlvbigpJyxcclxuICAgICdbYXR0ci5wb3NpdGlvbl0nOiAncG9zaXRpb24nLFxyXG4gICAgJ1thdHRyLmRyYWdnaW5nXSc6ICdkcmFnZ2luZygpJyxcclxuICAgICdbYXR0ci5hcHBlYXJhbmNlXSc6ICdhcHBlYXJhbmNlJyxcclxuICAgICdbYXR0ci52aXNpYmlsaXR5XSc6ICd2aXNpYmlsaXR5KCknLFxyXG4gICAgJ1thdHRyLm9yaWVudGF0aW9uXSc6ICdvcmllbnRhdGlvbigpJyxcclxuICAgICdbYXR0ci5kaXNhYmxlSW50ZXJhY3Rpb25dJzogJ2Rpc2FibGVJbnRlcmFjdGlvbigpJ1xyXG4gIH0sXHJcbiAgcHJvdmlkZXJzOiBbeyBwcm92aWRlOiBOR19TQ1JPTExCQVIsIHVzZUV4aXN0aW5nOiBOZ1Njcm9sbGJhckNvcmUgfV1cclxufSlcclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIE5nU2Nyb2xsYmFyQ29yZSBpbXBsZW1lbnRzIF9OZ1Njcm9sbGJhciwgT25Jbml0LCBBZnRlclZpZXdJbml0IHtcclxuXHJcbiAgLyoqIEluamVjdGVkIG9wdGlvbnMgKi9cclxuICBwcml2YXRlIHJlYWRvbmx5IGluamVjdGVkT3B0aW9uczogTmdTY3JvbGxiYXJPcHRpb25zID0gaW5qZWN0KE5HX1NDUk9MTEJBUl9PUFRJT05TLCB7IG9wdGlvbmFsOiB0cnVlIH0pO1xyXG5cclxuICAvKiogQ29tYmluZSBpbmplY3RlZCBvcHRpb24gd2l0aCBkZWZhdWx0IG9wdGlvbnMgKi9cclxuICBwcml2YXRlIHJlYWRvbmx5IG9wdGlvbnM6IE5nU2Nyb2xsYmFyT3B0aW9ucyA9IHRoaXMuaW5qZWN0ZWRPcHRpb25zID8geyAuLi5kZWZhdWx0T3B0aW9ucywgLi4udGhpcy5pbmplY3RlZE9wdGlvbnMgfSA6IGRlZmF1bHRPcHRpb25zO1xyXG5cclxuICBwcml2YXRlIHJlYWRvbmx5IHpvbmU6IE5nWm9uZSA9IGluamVjdChOZ1pvbmUpO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgcGxhdGZvcm06IFBsYXRmb3JtID0gaW5qZWN0KFBsYXRmb3JtKTtcclxuICBwcml2YXRlIHJlYWRvbmx5IGluamVjdG9yOiBJbmplY3RvciA9IGluamVjdChJbmplY3Rvcik7XHJcblxyXG4gIC8qKiBBIGZsYWcgdGhhdCBpbmRpY2F0ZXMgaWYgdGhlIHBsYXRmb3JtIGlzIG1vYmlsZSAqL1xyXG4gIHJlYWRvbmx5IGlzTW9iaWxlOiBib29sZWFuID0gdGhpcy5wbGF0Zm9ybS5JT1MgfHwgdGhpcy5wbGF0Zm9ybS5BTkRST0lEO1xyXG4gIGRpcjogRGlyZWN0aW9uYWxpdHkgPSBpbmplY3QoRGlyZWN0aW9uYWxpdHkpO1xyXG5cclxuICBzbW9vdGhTY3JvbGw6IFNtb290aFNjcm9sbE1hbmFnZXIgPSBpbmplY3QoU21vb3RoU2Nyb2xsTWFuYWdlcik7XHJcblxyXG4gIG5hdGl2ZUVsZW1lbnQ6IEhUTUxFbGVtZW50ID0gaW5qZWN0KEVsZW1lbnRSZWY8SFRNTEVsZW1lbnQ+KS5uYXRpdmVFbGVtZW50O1xyXG5cclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgaWYgdGhlIGRpcmVjdGlvbiBpcyAnbHRyJyBvciAncnRsJ1xyXG4gICAqL1xyXG4gIGRpcmVjdGlvbjogU2lnbmFsPERpcmVjdGlvbj47XHJcblxyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB3aGVuIHNjcm9sbGJhciB0aHVtYiBpcyBiZWluZyBkcmFnZ2VkXHJcbiAgICovXHJcbiAgZHJhZ2dpbmc6IFdyaXRhYmxlU2lnbmFsPFNjcm9sbGJhckRyYWdnaW5nPiA9IHNpZ25hbCgnbm9uZScpO1xyXG5cclxuICAvKipcclxuICAgKiBTZXRzIHRoZSBzdXBwb3J0ZWQgc2Nyb2xsIHRyYWNrIG9mIHRoZSB2aWV3cG9ydCwgdGhlcmUgYXJlIDMgb3B0aW9uczpcclxuICAgKlxyXG4gICAqIC0gYHZlcnRpY2FsYCBVc2UgYm90aCB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY3JvbGxiYXJcclxuICAgKiAtIGBob3Jpem9udGFsYCBVc2UgYm90aCB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY3JvbGxiYXJcclxuICAgKiAtIGBhdXRvYCBVc2UgYm90aCB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY3JvbGxiYXJcclxuICAgKi9cclxuICBvcmllbnRhdGlvbjogSW5wdXRTaWduYWw8U2Nyb2xsYmFyT3JpZW50YXRpb24+ID0gaW5wdXQ8U2Nyb2xsYmFyT3JpZW50YXRpb24+KHRoaXMub3B0aW9ucy5vcmllbnRhdGlvbik7XHJcblxyXG4gIC8qKlxyXG4gICAqIFdoZW4gdG8gc2hvdyB0aGUgc2Nyb2xsYmFyLCBhbmQgdGhlcmUgYXJlIDMgb3B0aW9uczpcclxuICAgKlxyXG4gICAqIC0gYG5hdGl2ZWAgKGRlZmF1bHQpIFNjcm9sbGJhciB3aWxsIGJlIHZpc2libGUgd2hlbiB2aWV3cG9ydCBpcyBzY3JvbGxhYmxlIGxpa2Ugd2l0aCBuYXRpdmUgc2Nyb2xsYmFyXHJcbiAgICogLSBgaG92ZXJgIFNjcm9sbGJhcnMgYXJlIGhpZGRlbiBieSBkZWZhdWx0LCBvbmx5IHZpc2libGUgb24gc2Nyb2xsaW5nIG9yIGhvdmVyaW5nXHJcbiAgICogLSBgYWx3YXlzYCBTY3JvbGxiYXJzIGFyZSBhbHdheXMgc2hvd24gZXZlbiBpZiB0aGUgdmlld3BvcnQgaXMgbm90IHNjcm9sbGFibGVcclxuICAgKi9cclxuICB2aXNpYmlsaXR5OiBJbnB1dFNpZ25hbDxTY3JvbGxiYXJWaXNpYmlsaXR5PiA9IGlucHV0PFNjcm9sbGJhclZpc2liaWxpdHk+KHRoaXMub3B0aW9ucy52aXNpYmlsaXR5KTtcclxuXHJcbiAgLyoqIFNob3cgc2Nyb2xsYmFyIGJ1dHRvbnMgKi9cclxuICBidXR0b25zOiBJbnB1dFNpZ25hbFdpdGhUcmFuc2Zvcm08Ym9vbGVhbiwgc3RyaW5nIHwgYm9vbGVhbj4gPSBpbnB1dDxib29sZWFuLCBzdHJpbmcgfCBib29sZWFuPih0aGlzLm9wdGlvbnMuYnV0dG9ucywge1xyXG4gICAgdHJhbnNmb3JtOiBib29sZWFuQXR0cmlidXRlXHJcbiAgfSk7XHJcblxyXG4gIC8qKiBEaXNhYmxlcyBzY3JvbGxiYXIgaW50ZXJhY3Rpb24gbGlrZSBkcmFnZ2luZyB0aHVtYiBhbmQganVtcGluZyBieSB0cmFjayBjbGljayAqL1xyXG4gIGRpc2FibGVJbnRlcmFjdGlvbjogSW5wdXRTaWduYWxXaXRoVHJhbnNmb3JtPGJvb2xlYW4sIHN0cmluZyB8IGJvb2xlYW4+ID0gaW5wdXQ8Ym9vbGVhbiwgc3RyaW5nIHwgYm9vbGVhbj4odGhpcy5vcHRpb25zLmRpc2FibGVJbnRlcmFjdGlvbiwge1xyXG4gICAgdHJhbnNmb3JtOiBib29sZWFuQXR0cmlidXRlXHJcbiAgfSk7XHJcblxyXG4gIC8qKiBXaGV0aGVyIFJlc2l6ZU9ic2VydmVyIGlzIGRpc2FibGVkICovXHJcbiAgZGlzYWJsZVNlbnNvcjogSW5wdXRTaWduYWxXaXRoVHJhbnNmb3JtPGJvb2xlYW4sIHN0cmluZyB8IGJvb2xlYW4+ID0gaW5wdXQ8Ym9vbGVhbiwgc3RyaW5nIHwgYm9vbGVhbj4odGhpcy5vcHRpb25zLmRpc2FibGVTZW5zb3IsIHtcclxuICAgIHRyYW5zZm9ybTogYm9vbGVhbkF0dHJpYnV0ZVxyXG4gIH0pO1xyXG5cclxuICAvKiogVGhyb3R0bGUgaW50ZXJ2YWwgZm9yIGRldGVjdGluZyBjaGFuZ2VzIHZpYSBSZXNpemVPYnNlcnZlciAqL1xyXG4gIHNlbnNvclRocm90dGxlVGltZTogSW5wdXRTaWduYWw8bnVtYmVyPiA9IGlucHV0PG51bWJlciwgbnVtYmVyPih0aGlzLm9wdGlvbnMuc2Vuc29yVGhyb3R0bGVUaW1lLCB7XHJcbiAgICB0cmFuc2Zvcm06IG51bWJlckF0dHJpYnV0ZVxyXG4gIH0pO1xyXG5cclxuICB2aWV3cG9ydERpbWVuc2lvbjogV3JpdGFibGVTaWduYWw8Vmlld3BvcnRCb3VuZGFyaWVzPiA9IHNpZ25hbCh7XHJcbiAgICBjb250ZW50SGVpZ2h0OiAwLFxyXG4gICAgY29udGVudFdpZHRoOiAwLFxyXG4gICAgb2Zmc2V0SGVpZ2h0OiAwLFxyXG4gICAgb2Zmc2V0V2lkdGg6IDBcclxuICB9KTtcclxuXHJcbiAgc3RhdGU6IFNpZ25hbDxWaWV3cG9ydFN0YXRlPiA9IGNvbXB1dGVkKCgpID0+IHtcclxuICAgIGxldCB2ZXJ0aWNhbFVzZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIGxldCBob3Jpem9udGFsVXNlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgbGV0IGlzVmVydGljYWxseVNjcm9sbGFibGU6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIGxldCBpc0hvcml6b250YWxseVNjcm9sbGFibGU6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICBjb25zdCBvcmllbnRhdGlvbjogU2Nyb2xsYmFyT3JpZW50YXRpb24gPSB0aGlzLm9yaWVudGF0aW9uKCk7XHJcbiAgICBjb25zdCB2aXNpYmlsaXR5OiBTY3JvbGxiYXJWaXNpYmlsaXR5ID0gdGhpcy52aXNpYmlsaXR5KCk7XHJcbiAgICBjb25zdCB2aWV3cG9ydDogVmlld3BvcnRCb3VuZGFyaWVzID0gdGhpcy52aWV3cG9ydERpbWVuc2lvbigpO1xyXG5cclxuICAgIC8vIENoZWNrIGlmIHZlcnRpY2FsIHNjcm9sbGJhciBzaG91bGQgYmUgZGlzcGxheWVkXHJcbiAgICBpZiAob3JpZW50YXRpb24gPT09ICdhdXRvJyB8fCBvcmllbnRhdGlvbiA9PT0gJ3ZlcnRpY2FsJykge1xyXG4gICAgICBpc1ZlcnRpY2FsbHlTY3JvbGxhYmxlID0gdmlld3BvcnQuY29udGVudEhlaWdodCA+IHZpZXdwb3J0Lm9mZnNldEhlaWdodDtcclxuICAgICAgdmVydGljYWxVc2VkID0gdmlzaWJpbGl0eSA9PT0gJ3Zpc2libGUnIHx8IGlzVmVydGljYWxseVNjcm9sbGFibGU7XHJcbiAgICB9XHJcbiAgICAvLyBDaGVjayBpZiBob3Jpem9udGFsIHNjcm9sbGJhciBzaG91bGQgYmUgZGlzcGxheWVkXHJcbiAgICBpZiAob3JpZW50YXRpb24gPT09ICdhdXRvJyB8fCBvcmllbnRhdGlvbiA9PT0gJ2hvcml6b250YWwnKSB7XHJcbiAgICAgIGlzSG9yaXpvbnRhbGx5U2Nyb2xsYWJsZSA9IHZpZXdwb3J0LmNvbnRlbnRXaWR0aCA+IHZpZXdwb3J0Lm9mZnNldFdpZHRoO1xyXG4gICAgICBob3Jpem9udGFsVXNlZCA9IHZpc2liaWxpdHkgPT09ICd2aXNpYmxlJyB8fCBpc0hvcml6b250YWxseVNjcm9sbGFibGU7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdmVydGljYWxVc2VkLFxyXG4gICAgICBob3Jpem9udGFsVXNlZCxcclxuICAgICAgaXNWZXJ0aWNhbGx5U2Nyb2xsYWJsZSxcclxuICAgICAgaXNIb3Jpem9udGFsbHlTY3JvbGxhYmxlLFxyXG4gICAgfTtcclxuICB9KTtcclxuXHJcbiAgaXNWZXJ0aWNhbGx5U2Nyb2xsYWJsZTogU2lnbmFsPGJvb2xlYW4+ID0gY29tcHV0ZWQoKCkgPT4gdGhpcy5zdGF0ZSgpLmlzVmVydGljYWxseVNjcm9sbGFibGUpO1xyXG4gIGlzSG9yaXpvbnRhbGx5U2Nyb2xsYWJsZTogU2lnbmFsPGJvb2xlYW4+ID0gY29tcHV0ZWQoKCkgPT4gdGhpcy5zdGF0ZSgpLmlzSG9yaXpvbnRhbGx5U2Nyb2xsYWJsZSk7XHJcbiAgdmVydGljYWxVc2VkOiBTaWduYWw8Ym9vbGVhbj4gPSBjb21wdXRlZCgoKSA9PiB0aGlzLnN0YXRlKCkudmVydGljYWxVc2VkKTtcclxuICBob3Jpem9udGFsVXNlZDogU2lnbmFsPGJvb2xlYW4+ID0gY29tcHV0ZWQoKCkgPT4gdGhpcy5zdGF0ZSgpLmhvcml6b250YWxVc2VkKTtcclxuXHJcbiAgLyoqIFNjcm9sbCBkdXJhdGlvbiB3aGVuIHRoZSBzY3JvbGwgdHJhY2sgaXMgY2xpY2tlZCAqL1xyXG4gIEBJbnB1dCh7IHRyYW5zZm9ybTogbnVtYmVyQXR0cmlidXRlIH0pIHRyYWNrU2Nyb2xsRHVyYXRpb246IG51bWJlciA9IHRoaXMub3B0aW9ucy50cmFja1Njcm9sbER1cmF0aW9uO1xyXG5cclxuICAvKipcclxuICAgKiAgU2V0cyB0aGUgYXBwZWFyYW5jZSBvZiB0aGUgc2Nyb2xsYmFyLCB0aGVyZSBhcmUgMiBvcHRpb25zOlxyXG4gICAqXHJcbiAgICogLSBgbmF0aXZlYCAoZGVmYXVsdCkgc2Nyb2xsYmFyIHNwYWNlIHdpbGwgYmUgcmVzZXJ2ZWQganVzdCBsaWtlIHdpdGggbmF0aXZlIHNjcm9sbGJhci5cclxuICAgKiAtIGBjb21wYWN0YCBzY3JvbGxiYXIgZG9lc24ndCByZXNlcnZlIGFueSBzcGFjZSwgdGhleSBhcmUgcGxhY2VkIG92ZXIgdGhlIHZpZXdwb3J0LlxyXG4gICAqL1xyXG4gIEBJbnB1dCgpIGFwcGVhcmFuY2U6IFNjcm9sbGJhckFwcGVhcmFuY2UgPSB0aGlzLm9wdGlvbnMuYXBwZWFyYW5jZTtcclxuICAvKipcclxuICAgKiBTZXRzIHRoZSBwb3NpdGlvbiBvZiBlYWNoIHNjcm9sbGJhciwgdGhlcmUgYXJlIDQgb3B0aW9uczpcclxuICAgKlxyXG4gICAqIC0gYG5hdGl2ZWAgKERlZmF1bHQpIFVzZSB0aGUgZGVmYXVsdCBwb3NpdGlvbiBsaWtlIGluIG5hdGl2ZSBzY3JvbGxiYXIuXHJcbiAgICogLSBgaW52ZXJ0WWAgSW52ZXJ0cyB2ZXJ0aWNhbCBzY3JvbGxiYXIgcG9zaXRpb25cclxuICAgKiAtIGBpbnZlcnRYYCBJbnZlcnRzIEhvcml6b250YWwgc2Nyb2xsYmFyIHBvc2l0aW9uXHJcbiAgICogLSBgaW52ZXJ0QWxsYCBJbnZlcnRzIGJvdGggc2Nyb2xsYmFyIHBvc2l0aW9uc1xyXG4gICAqL1xyXG4gIEBJbnB1dCgpIHBvc2l0aW9uOiBTY3JvbGxiYXJQb3NpdGlvbiA9IHRoaXMub3B0aW9ucy5wb3NpdGlvbjtcclxuXHJcbiAgLyoqIEEgY2xhc3MgZm9yd2FyZGVkIHRvIHRoZSBzY3JvbGxiYXIgdHJhY2sgZWxlbWVudCAqL1xyXG4gIEBJbnB1dCgpIHRyYWNrQ2xhc3M6IHN0cmluZyA9IHRoaXMub3B0aW9ucy50cmFja0NsYXNzO1xyXG4gIC8qKiBBIGNsYXNzIGZvcndhcmRlZCB0byB0aGUgc2Nyb2xsYmFyIHRodW1iIGVsZW1lbnQgKi9cclxuICBASW5wdXQoKSB0aHVtYkNsYXNzOiBzdHJpbmcgPSB0aGlzLm9wdGlvbnMudGh1bWJDbGFzcztcclxuICAvKiogQSBjbGFzcyBmb3J3YXJkZWQgdG8gdGhlIHNjcm9sbGJhciBidXR0b24gZWxlbWVudCAqL1xyXG4gIEBJbnB1dCgpIGJ1dHRvbkNsYXNzOiBzdHJpbmcgPSB0aGlzLm9wdGlvbnMudGh1bWJDbGFzcztcclxuXHJcbiAgLyoqIFN0ZWFtIHRoYXQgZW1pdHMgd2hlbiBzY3JvbGxiYXIgaXMgaW5pdGlhbGl6ZWQgKi9cclxuICBAT3V0cHV0KCkgYWZ0ZXJJbml0OiBFdmVudEVtaXR0ZXI8dm9pZD4gPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XHJcblxyXG4gIC8qKiBTdGVhbSB0aGF0IGVtaXRzIHdoZW4gc2Nyb2xsYmFyIGlzIHVwZGF0ZWQgKi9cclxuICBAT3V0cHV0KCkgYWZ0ZXJVcGRhdGU6IEV2ZW50RW1pdHRlcjx2b2lkPiA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcclxuXHJcbiAgLyoqIFJlc2l6ZSBvYnNlcnZlciBzdWJzY3JpcHRpb24gKi9cclxuICBwcml2YXRlIHNpemVDaGFuZ2VTdWI6IFN1YnNjcmlwdGlvbjtcclxuXHJcbiAgLyoqIFZpZXdwb3J0IGFkYXB0ZXIgaW5zdGFuY2UgKi9cclxuICB2aWV3cG9ydDogVmlld3BvcnRBZGFwdGVyID0gbmV3IFZpZXdwb3J0QWRhcHRlcigpO1xyXG5cclxuICAvKiogVGhlIHNjcm9sbGJhcnMgY29tcG9uZW50IGluc3RhbmNlIHVzZWQgZm9yIHRlc3RpbmcgcHVycG9zZSAqL1xyXG4gIGFic3RyYWN0IF9zY3JvbGxiYXJzOiBTY3JvbGxiYXJzO1xyXG5cclxuICBuZ09uSW5pdCgpOiB2b2lkIHtcclxuICAgIHJ1bkluSW5qZWN0aW9uQ29udGV4dCh0aGlzLmluamVjdG9yLCAoKSA9PiB7XHJcbiAgICAgIC8vIFRoZSBkaXJlY3Rpb24gc2lnbmFsIGNhbm5vdCBiZSBpbml0aWFsaXplZCBpbiB0aGUgY29uc3RydWN0b3JcclxuICAgICAgLy8gQmVjYXVzZSBpdCBpbml0aWFsbHkgcmV0dXJucyAnbHRyJyBldmVuIGlmIGRpci52YWx1ZSBpcyAncnRsYFxyXG4gICAgICB0aGlzLmRpcmVjdGlvbiA9IHRvU2lnbmFsPERpcmVjdGlvbiwgRGlyZWN0aW9uPih0aGlzLmRpci5jaGFuZ2UucGlwZShtYXAoKCkgPT4gdGhpcy5kaXIudmFsdWUpKSwgeyBpbml0aWFsVmFsdWU6IHRoaXMuZGlyLnZhbHVlIH0pO1xyXG5cclxuICAgICAgZWZmZWN0KChvbkNsZWFudXA6IEVmZmVjdENsZWFudXBSZWdpc3RlckZuKSA9PiB7XHJcbiAgICAgICAgLy8gQ2hlY2sgd2hldGhlciBzZW5zb3Igc2hvdWxkIGJlIGVuYWJsZWRcclxuICAgICAgICBpZiAodGhpcy5kaXNhYmxlU2Vuc29yKCkpIHtcclxuICAgICAgICAgIC8vIElmIHNlbnNvciBpcyBkaXNhYmxlZCB1cGRhdGUgbWFudWFsbHlcclxuICAgICAgICAgIHRoaXMuc2l6ZUNoYW5nZVN1Yj8udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaWYgKHRoaXMucGxhdGZvcm0uaXNCcm93c2VyICYmIHRoaXMudmlld3BvcnQuaW5pdGlhbGl6ZWQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNpemVDaGFuZ2VTdWI/LnVuc3Vic2NyaWJlKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnpvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG4gICAgICAgICAgICAgIHRoaXMuc2l6ZUNoYW5nZVN1YiA9IHJlc2l6ZU9ic2VydmVyKHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQ6IHRoaXMudmlld3BvcnQubmF0aXZlRWxlbWVudCxcclxuICAgICAgICAgICAgICAgIGNvbnRlbnRXcmFwcGVyOiB0aGlzLnZpZXdwb3J0LmNvbnRlbnRXcmFwcGVyRWxlbWVudCxcclxuICAgICAgICAgICAgICAgIHRocm90dGxlRHVyYXRpb246IHRoaXMuc2Vuc29yVGhyb3R0bGVUaW1lKClcclxuICAgICAgICAgICAgICB9KS5waXBlKFxyXG4gICAgICAgICAgICAgICAgdGFwKChyZWFzb246IFNjcm9sbGJhclVwZGF0ZVJlYXNvbikgPT4gdGhpcy51cGRhdGUocmVhc29uKSlcclxuICAgICAgICAgICAgICApLnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG9uQ2xlYW51cCgoKSA9PiB0aGlzLnNpemVDaGFuZ2VTdWI/LnVuc3Vic2NyaWJlKCkpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xyXG4gICAgLy8gSWYgc2Vuc29yIGlzIGRpc2FibGVkLCB1cGRhdGUgdG8gZXZhbHVhdGUgdGhlIHN0YXRlXHJcbiAgICBpZiAodGhpcy5wbGF0Zm9ybS5pc0Jyb3dzZXIgJiYgdGhpcy5kaXNhYmxlU2Vuc29yKCkpIHtcclxuICAgICAgLy8gSW4gY2FzZSBvZiAzcmQgcGFydHkgbGlicmFyeSwgbmVlZCB0byB3YWl0IGZvciBjb250ZW50IHRvIGJlIHJlbmRlcmVkXHJcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy51cGRhdGUoU2Nyb2xsYmFyVXBkYXRlUmVhc29uLkFmdGVySW5pdCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlIGxvY2FsIHN0YXRlIGFuZCB0aGUgaW50ZXJuYWwgc2Nyb2xsYmFyIGNvbnRyb2xzXHJcbiAgICovXHJcbiAgdXBkYXRlKHJlYXNvbj86IFNjcm9sbGJhclVwZGF0ZVJlYXNvbik6IHZvaWQge1xyXG4gICAgdGhpcy51cGRhdGVDU1NWYXJpYWJsZXMoKTtcclxuXHJcbiAgICB0aGlzLnpvbmUucnVuKCgpID0+IHtcclxuICAgICAgdGhpcy52aWV3cG9ydERpbWVuc2lvbi5zZXQoe1xyXG4gICAgICAgIGNvbnRlbnRIZWlnaHQ6IHRoaXMudmlld3BvcnQuY29udGVudEhlaWdodCxcclxuICAgICAgICBjb250ZW50V2lkdGg6IHRoaXMudmlld3BvcnQuY29udGVudFdpZHRoLFxyXG4gICAgICAgIG9mZnNldEhlaWdodDogdGhpcy52aWV3cG9ydC5vZmZzZXRIZWlnaHQsXHJcbiAgICAgICAgb2Zmc2V0V2lkdGg6IHRoaXMudmlld3BvcnQub2Zmc2V0V2lkdGhcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAocmVhc29uID09PSBTY3JvbGxiYXJVcGRhdGVSZWFzb24uQWZ0ZXJJbml0KSB7XHJcbiAgICAgICAgdGhpcy5hZnRlckluaXQuZW1pdCgpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuYWZ0ZXJVcGRhdGUuZW1pdCgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNtb290aCBzY3JvbGwgZnVuY3Rpb25zXHJcbiAgICovXHJcbiAgc2Nyb2xsVG8ob3B0aW9uczogU21vb3RoU2Nyb2xsVG9PcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICByZXR1cm4gdGhpcy5zbW9vdGhTY3JvbGwuc2Nyb2xsVG8odGhpcy52aWV3cG9ydCEubmF0aXZlRWxlbWVudCwgb3B0aW9ucyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTY3JvbGwgdG8gZWxlbWVudCBieSByZWZlcmVuY2Ugb3Igc2VsZWN0b3JcclxuICAgKi9cclxuICBzY3JvbGxUb0VsZW1lbnQodGFyZ2V0OiBTbW9vdGhTY3JvbGxFbGVtZW50LCBvcHRpb25zPzogU21vb3RoU2Nyb2xsVG9FbGVtZW50T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgcmV0dXJuIHRoaXMuc21vb3RoU2Nyb2xsLnNjcm9sbFRvRWxlbWVudCh0aGlzLnZpZXdwb3J0Lm5hdGl2ZUVsZW1lbnQsIHRhcmdldCwgb3B0aW9ucyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBVcGRhdGUgRXNzZW50aWFsIENTUyB2YXJpYWJsZXNcclxuICAgKi9cclxuICBwcml2YXRlIHVwZGF0ZUNTU1ZhcmlhYmxlcygpOiB2b2lkIHtcclxuICAgIHRoaXMubmF0aXZlRWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jb250ZW50LWhlaWdodCcsIGAkeyB0aGlzLnZpZXdwb3J0LmNvbnRlbnRIZWlnaHQgfWApO1xyXG4gICAgdGhpcy5uYXRpdmVFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KCctLWNvbnRlbnQtd2lkdGgnLCBgJHsgdGhpcy52aWV3cG9ydC5jb250ZW50V2lkdGggfWApO1xyXG4gICAgdGhpcy5uYXRpdmVFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KCctLXZpZXdwb3J0LWhlaWdodCcsIGAkeyB0aGlzLnZpZXdwb3J0Lm9mZnNldEhlaWdodCB9YCk7XHJcbiAgICB0aGlzLm5hdGl2ZUVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoJy0tdmlld3BvcnQtd2lkdGgnLCBgJHsgdGhpcy52aWV3cG9ydC5vZmZzZXRXaWR0aCB9YCk7XHJcbiAgfVxyXG59XHJcbiJdfQ==